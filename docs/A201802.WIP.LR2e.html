<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>A201802.WIP.LR2e</title><link rel="stylesheet" href="mi-common.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--allow-unsolved-metas</a> <a id="36" class="Symbol">#-}</a>

<a id="41" class="Keyword">module</a> <a id="48" href="A201802.WIP.LR2e.html" class="Module">A201802.WIP.LR2e</a> <a id="65" class="Keyword">where</a>

<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="A201801.Prelude.html" class="Module">A201801.Prelude</a>
<a id="100" class="Keyword">open</a> <a id="105" class="Keyword">import</a> <a id="112" href="A201801.Category.html" class="Module">A201801.Category</a>
<a id="129" class="Keyword">open</a> <a id="134" class="Keyword">import</a> <a id="141" href="A201801.Fin.html" class="Module">A201801.Fin</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="A201801.FinLemmas.html" class="Module">A201801.FinLemmas</a>
<a id="183" class="Keyword">open</a> <a id="188" class="Keyword">import</a> <a id="195" href="A201801.Vec.html" class="Module">A201801.Vec</a>
<a id="207" class="Keyword">open</a> <a id="212" class="Keyword">import</a> <a id="219" href="A201801.VecLemmas.html" class="Module">A201801.VecLemmas</a>
<a id="237" class="Keyword">open</a> <a id="242" class="Keyword">import</a> <a id="249" href="A201801.AllVec.html" class="Module">A201801.AllVec</a>

<a id="265" class="Keyword">open</a> <a id="270" class="Keyword">import</a> <a id="277" href="A201802.LR0.html" class="Module">A201802.LR0</a>
<a id="289" class="Keyword">open</a> <a id="294" class="Keyword">import</a> <a id="301" href="A201802.LR0Lemmas.html" class="Module">A201802.LR0Lemmas</a>
<a id="319" class="Keyword">open</a> <a id="324" class="Keyword">import</a> <a id="331" href="A201802.LR1.html" class="Module">A201802.LR1</a>


<a id="345" class="Comment">--------------------------------------------------------------------------------</a>


<a id="428" class="Comment">-- `iv : IsVal M` says that the term `M` is a value</a>
<a id="480" class="Keyword">data</a> <a id="IsVal"></a><a id="485" href="A201802.WIP.LR2e.html#485" class="Datatype">IsVal</a> <a id="491" class="Symbol">{</a><a id="492" href="A201802.WIP.LR2e.html#492" class="Bound">g</a><a id="493" class="Symbol">}</a> <a id="495" class="Symbol">:</a> <a id="497" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="502" href="A201802.WIP.LR2e.html#492" class="Bound">g</a> <a id="504" class="Symbol">→</a> <a id="506" class="PrimitiveType">Set</a>
  <a id="512" class="Keyword">where</a>
    <a id="522" class="Keyword">instance</a>
      <a id="IsVal.val-LAM"></a><a id="537" href="A201802.WIP.LR2e.html#537" class="InductiveConstructor">val-LAM</a>   <a id="547" class="Symbol">:</a> <a id="549" class="Symbol">∀</a> <a id="551" class="Symbol">{</a><a id="552" href="A201802.WIP.LR2e.html#552" class="Bound">M</a><a id="553" class="Symbol">}</a> <a id="555" class="Symbol">→</a> <a id="557" href="A201802.WIP.LR2e.html#485" class="Datatype">IsVal</a> <a id="563" class="Symbol">(</a><a id="564" href="A201802.LR0.html#607" class="InductiveConstructor">LAM</a> <a id="568" href="A201802.WIP.LR2e.html#552" class="Bound">M</a><a id="569" class="Symbol">)</a>
      <a id="IsVal.val-TRUE"></a><a id="577" href="A201802.WIP.LR2e.html#577" class="InductiveConstructor">val-TRUE</a>  <a id="587" class="Symbol">:</a> <a id="589" href="A201802.WIP.LR2e.html#485" class="Datatype">IsVal</a> <a id="595" href="A201802.LR0.html#932" class="InductiveConstructor">TRUE</a>
      <a id="IsVal.val-FALSE"></a><a id="606" href="A201802.WIP.LR2e.html#606" class="InductiveConstructor">val-FALSE</a> <a id="616" class="Symbol">:</a> <a id="618" href="A201802.WIP.LR2e.html#485" class="Datatype">IsVal</a> <a id="624" href="A201802.LR0.html#951" class="InductiveConstructor">FALSE</a>


<a id="632" class="Comment">-- -- `val M {{iv}} : Val g` keeps the term `M` together with the evidence `iv` that `M` is a value</a>
<a id="732" class="Comment">-- record Val (g : Nat) : Set</a>
<a id="762" class="Comment">--   where</a>
<a id="773" class="Comment">--     constructor val</a>
<a id="796" class="Comment">--     field</a>
<a id="809" class="Comment">--       term   : Term g</a>
<a id="834" class="Comment">--       {{iv}} : IsVal term</a>


<a id="865" class="Comment">-- `E : EvCx g` is a well-scoped call-by-value evaluation context</a>
<a id="931" class="Keyword">data</a> <a id="EvCx"></a><a id="936" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="941" class="Symbol">(</a><a id="942" href="A201802.WIP.LR2e.html#942" class="Bound">g</a> <a id="944" class="Symbol">:</a> <a id="946" href="Agda.Builtin.Nat.html#165" class="Datatype">Nat</a><a id="949" class="Symbol">)</a> <a id="951" class="Symbol">:</a> <a id="953" class="PrimitiveType">Set</a>
  <a id="959" class="Keyword">where</a>
    <a id="EvCx.ec-[]"></a><a id="969" href="A201802.WIP.LR2e.html#969" class="InductiveConstructor">ec-[]</a>      <a id="980" class="Symbol">:</a> <a id="982" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="987" href="A201802.WIP.LR2e.html#942" class="Bound">g</a>
    <a id="EvCx.ec-fun-APP"></a><a id="993" href="A201802.WIP.LR2e.html#993" class="InductiveConstructor">ec-fun-APP</a> <a id="1004" class="Symbol">:</a> <a id="1006" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="1011" href="A201802.WIP.LR2e.html#942" class="Bound">g</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1020" href="A201802.WIP.LR2e.html#942" class="Bound">g</a> <a id="1022" class="Symbol">→</a> <a id="1024" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="1029" href="A201802.WIP.LR2e.html#942" class="Bound">g</a>
    <a id="EvCx.ec-arg-APP"></a><a id="1035" href="A201802.WIP.LR2e.html#1035" class="InductiveConstructor">ec-arg-APP</a> <a id="1046" class="Symbol">:</a> <a id="1048" class="Symbol">(</a><a id="1049" href="A201802.WIP.LR2e.html#1049" class="Bound">M</a> <a id="1051" class="Symbol">:</a> <a id="1053" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1058" href="A201802.WIP.LR2e.html#942" class="Bound">g</a><a id="1059" class="Symbol">)</a> <a id="1061" class="Symbol">→</a> <a id="1063" class="Symbol">{{</a><a id="1065" href="A201802.WIP.LR2e.html#1065" class="Bound">_</a> <a id="1067" class="Symbol">:</a> <a id="1069" href="A201802.WIP.LR2e.html#485" class="Datatype">IsVal</a> <a id="1075" href="A201802.WIP.LR2e.html#1049" class="Bound">M</a><a id="1076" class="Symbol">}}</a> <a id="1079" class="Symbol">→</a> <a id="1081" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="1086" href="A201802.WIP.LR2e.html#942" class="Bound">g</a> <a id="1088" class="Symbol">→</a> <a id="1090" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="1095" href="A201802.WIP.LR2e.html#942" class="Bound">g</a>
    <a id="EvCx.ec-IF"></a><a id="1101" href="A201802.WIP.LR2e.html#1101" class="InductiveConstructor">ec-IF</a>      <a id="1112" class="Symbol">:</a> <a id="1114" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="1119" href="A201802.WIP.LR2e.html#942" class="Bound">g</a> <a id="1121" class="Symbol">→</a> <a id="1123" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1128" href="A201802.WIP.LR2e.html#942" class="Bound">g</a> <a id="1130" class="Symbol">→</a> <a id="1132" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1137" href="A201802.WIP.LR2e.html#942" class="Bound">g</a> <a id="1139" class="Symbol">→</a> <a id="1141" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="1146" href="A201802.WIP.LR2e.html#942" class="Bound">g</a>


<a id="1150" class="Comment">-- `E [ M ] : Term g` plugs the term `M` into the evaluation context `E`</a>
<a id="_[_]"></a><a id="1223" href="A201802.WIP.LR2e.html#1223" class="Function Operator">_[_]</a> <a id="1228" class="Symbol">:</a> <a id="1230" class="Symbol">∀</a> <a id="1232" class="Symbol">{</a><a id="1233" href="A201802.WIP.LR2e.html#1233" class="Bound">g</a><a id="1234" class="Symbol">}</a> <a id="1236" class="Symbol">→</a> <a id="1238" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="1243" href="A201802.WIP.LR2e.html#1233" class="Bound">g</a> <a id="1245" class="Symbol">→</a> <a id="1247" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1252" href="A201802.WIP.LR2e.html#1233" class="Bound">g</a> <a id="1254" class="Symbol">→</a> <a id="1256" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1261" href="A201802.WIP.LR2e.html#1233" class="Bound">g</a>
<a id="1263" href="A201802.WIP.LR2e.html#969" class="InductiveConstructor">ec-[]</a>            <a id="1280" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1282" href="A201802.WIP.LR2e.html#1282" class="Bound">M</a> <a id="1284" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a> <a id="1286" class="Symbol">=</a> <a id="1288" href="A201802.WIP.LR2e.html#1282" class="Bound">M</a>
<a id="1290" href="A201802.WIP.LR2e.html#993" class="InductiveConstructor">ec-fun-APP</a> <a id="1301" href="A201802.WIP.LR2e.html#1301" class="Bound">E</a> <a id="1303" href="A201802.WIP.LR2e.html#1303" class="Bound">N</a>   <a id="1307" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1309" href="A201802.WIP.LR2e.html#1309" class="Bound">M</a> <a id="1311" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a> <a id="1313" class="Symbol">=</a> <a id="1315" href="A201802.LR0.html#641" class="InductiveConstructor">APP</a> <a id="1319" class="Symbol">(</a><a id="1320" href="A201802.WIP.LR2e.html#1301" class="Bound">E</a> <a id="1322" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1324" href="A201802.WIP.LR2e.html#1309" class="Bound">M</a> <a id="1326" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a><a id="1327" class="Symbol">)</a> <a id="1329" href="A201802.WIP.LR2e.html#1303" class="Bound">N</a>
<a id="1331" href="A201802.WIP.LR2e.html#1035" class="InductiveConstructor">ec-arg-APP</a> <a id="1342" href="A201802.WIP.LR2e.html#1342" class="Bound">N</a> <a id="1344" href="A201802.WIP.LR2e.html#1344" class="Bound">E</a>   <a id="1348" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1350" href="A201802.WIP.LR2e.html#1350" class="Bound">M</a> <a id="1352" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a> <a id="1354" class="Symbol">=</a> <a id="1356" href="A201802.LR0.html#641" class="InductiveConstructor">APP</a> <a id="1360" href="A201802.WIP.LR2e.html#1342" class="Bound">N</a> <a id="1362" class="Symbol">(</a><a id="1363" href="A201802.WIP.LR2e.html#1344" class="Bound">E</a> <a id="1365" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1367" href="A201802.WIP.LR2e.html#1350" class="Bound">M</a> <a id="1369" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a><a id="1370" class="Symbol">)</a>
<a id="1372" href="A201802.WIP.LR2e.html#1101" class="InductiveConstructor">ec-IF</a>      <a id="1383" href="A201802.WIP.LR2e.html#1383" class="Bound">E</a> <a id="1385" href="A201802.WIP.LR2e.html#1385" class="Bound">N</a> <a id="1387" href="A201802.WIP.LR2e.html#1387" class="Bound">O</a> <a id="1389" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1391" href="A201802.WIP.LR2e.html#1391" class="Bound">M</a> <a id="1393" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a> <a id="1395" class="Symbol">=</a> <a id="1397" href="A201802.LR0.html#970" class="InductiveConstructor">IF</a> <a id="1400" class="Symbol">(</a><a id="1401" href="A201802.WIP.LR2e.html#1383" class="Bound">E</a> <a id="1403" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1405" href="A201802.WIP.LR2e.html#1391" class="Bound">M</a> <a id="1407" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a><a id="1408" class="Symbol">)</a> <a id="1410" href="A201802.WIP.LR2e.html#1385" class="Bound">N</a> <a id="1412" href="A201802.WIP.LR2e.html#1387" class="Bound">O</a>


<a id="1416" class="Comment">-- `_ : M ↦ M′` says that the term `M` reduces in one step to the term `M′`</a>
<a id="1492" class="Keyword">infix</a> <a id="1498" class="Number">3</a> <a id="1500" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">_↦_</a>
<a id="1504" class="Keyword">data</a> <a id="_↦_"></a><a id="1509" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">_↦_</a> <a id="1513" class="Symbol">{</a><a id="1514" href="A201802.WIP.LR2e.html#1514" class="Bound">g</a><a id="1515" class="Symbol">}</a> <a id="1517" class="Symbol">:</a> <a id="1519" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1524" href="A201802.WIP.LR2e.html#1514" class="Bound">g</a> <a id="1526" class="Symbol">→</a> <a id="1528" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1533" href="A201802.WIP.LR2e.html#1514" class="Bound">g</a> <a id="1535" class="Symbol">→</a> <a id="1537" class="PrimitiveType">Set</a>
  <a id="1543" class="Keyword">where</a>
    <a id="_↦_.step-APP-LAM"></a><a id="1553" href="A201802.WIP.LR2e.html#1553" class="InductiveConstructor">step-APP-LAM</a>  <a id="1567" class="Symbol">:</a> <a id="1569" class="Symbol">∀</a> <a id="1571" class="Symbol">{</a><a id="1572" href="A201802.WIP.LR2e.html#1572" class="Bound">M</a> <a id="1574" href="A201802.WIP.LR2e.html#1574" class="Bound">N</a><a id="1575" class="Symbol">}</a> <a id="1577" class="Symbol">→</a> <a id="1579" href="A201802.LR0.html#641" class="InductiveConstructor">APP</a> <a id="1583" class="Symbol">(</a><a id="1584" href="A201802.LR0.html#607" class="InductiveConstructor">LAM</a> <a id="1588" href="A201802.WIP.LR2e.html#1572" class="Bound">M</a><a id="1589" class="Symbol">)</a> <a id="1591" href="A201802.WIP.LR2e.html#1574" class="Bound">N</a> <a id="1593" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">↦</a> <a id="1595" href="A201802.LR0.html#3029" class="Function">CUT</a> <a id="1599" href="A201802.WIP.LR2e.html#1574" class="Bound">N</a> <a id="1601" href="A201802.WIP.LR2e.html#1572" class="Bound">M</a>
    <a id="_↦_.step-IF-TRUE"></a><a id="1607" href="A201802.WIP.LR2e.html#1607" class="InductiveConstructor">step-IF-TRUE</a>  <a id="1621" class="Symbol">:</a> <a id="1623" class="Symbol">∀</a> <a id="1625" class="Symbol">{</a><a id="1626" href="A201802.WIP.LR2e.html#1626" class="Bound">N</a> <a id="1628" href="A201802.WIP.LR2e.html#1628" class="Bound">O</a><a id="1629" class="Symbol">}</a> <a id="1631" class="Symbol">→</a> <a id="1633" href="A201802.LR0.html#970" class="InductiveConstructor">IF</a> <a id="1636" href="A201802.LR0.html#932" class="InductiveConstructor">TRUE</a> <a id="1641" href="A201802.WIP.LR2e.html#1626" class="Bound">N</a> <a id="1643" href="A201802.WIP.LR2e.html#1628" class="Bound">O</a> <a id="1645" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">↦</a> <a id="1647" href="A201802.WIP.LR2e.html#1626" class="Bound">N</a>
    <a id="_↦_.step-IF-FALSE"></a><a id="1653" href="A201802.WIP.LR2e.html#1653" class="InductiveConstructor">step-IF-FALSE</a> <a id="1667" class="Symbol">:</a> <a id="1669" class="Symbol">∀</a> <a id="1671" class="Symbol">{</a><a id="1672" href="A201802.WIP.LR2e.html#1672" class="Bound">N</a> <a id="1674" href="A201802.WIP.LR2e.html#1674" class="Bound">O</a><a id="1675" class="Symbol">}</a> <a id="1677" class="Symbol">→</a> <a id="1679" href="A201802.LR0.html#970" class="InductiveConstructor">IF</a> <a id="1682" href="A201802.LR0.html#951" class="InductiveConstructor">FALSE</a> <a id="1688" href="A201802.WIP.LR2e.html#1672" class="Bound">N</a> <a id="1690" href="A201802.WIP.LR2e.html#1674" class="Bound">O</a> <a id="1692" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">↦</a> <a id="1694" href="A201802.WIP.LR2e.html#1674" class="Bound">O</a>
    <a id="_↦_.step-cong"></a><a id="1700" href="A201802.WIP.LR2e.html#1700" class="InductiveConstructor">step-cong</a>     <a id="1714" class="Symbol">:</a> <a id="1716" class="Symbol">∀</a> <a id="1718" class="Symbol">{</a><a id="1719" href="A201802.WIP.LR2e.html#1719" class="Bound">M</a> <a id="1721" href="A201802.WIP.LR2e.html#1721" class="Bound">M′</a><a id="1723" class="Symbol">}</a> <a id="1725" class="Symbol">→</a> <a id="1727" class="Symbol">(</a><a id="1728" href="A201802.WIP.LR2e.html#1728" class="Bound">E</a> <a id="1730" class="Symbol">:</a> <a id="1732" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="1737" href="A201802.WIP.LR2e.html#1514" class="Bound">g</a><a id="1738" class="Symbol">)</a> <a id="1740" class="Symbol">→</a> <a id="1742" href="A201802.WIP.LR2e.html#1719" class="Bound">M</a> <a id="1744" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">↦</a> <a id="1746" href="A201802.WIP.LR2e.html#1721" class="Bound">M′</a>
                             <a id="1778" class="Symbol">→</a> <a id="1780" href="A201802.WIP.LR2e.html#1728" class="Bound">E</a> <a id="1782" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1784" href="A201802.WIP.LR2e.html#1719" class="Bound">M</a> <a id="1786" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a> <a id="1788" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">↦</a> <a id="1790" href="A201802.WIP.LR2e.html#1728" class="Bound">E</a> <a id="1792" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="1794" href="A201802.WIP.LR2e.html#1721" class="Bound">M′</a> <a id="1797" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a>


<a id="1801" class="Comment">-- `_ : M ⤅ M′` says that the term `M` reduces in some number of steps to the term `M′`</a>
<a id="1889" class="Keyword">infix</a> <a id="1895" class="Number">3</a> <a id="1897" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">_⤅_</a>
<a id="1901" class="Keyword">data</a> <a id="_⤅_"></a><a id="1906" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">_⤅_</a> <a id="1910" class="Symbol">{</a><a id="1911" href="A201802.WIP.LR2e.html#1911" class="Bound">g</a><a id="1912" class="Symbol">}</a> <a id="1914" class="Symbol">:</a> <a id="1916" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1921" href="A201802.WIP.LR2e.html#1911" class="Bound">g</a> <a id="1923" class="Symbol">→</a> <a id="1925" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="1930" href="A201802.WIP.LR2e.html#1911" class="Bound">g</a> <a id="1932" class="Symbol">→</a> <a id="1934" class="PrimitiveType">Set</a>
  <a id="1940" class="Keyword">where</a>
    <a id="_⤅_.done"></a><a id="1950" href="A201802.WIP.LR2e.html#1950" class="InductiveConstructor">done</a> <a id="1955" class="Symbol">:</a> <a id="1957" class="Symbol">∀</a> <a id="1959" class="Symbol">{</a><a id="1960" href="A201802.WIP.LR2e.html#1960" class="Bound">M</a><a id="1961" class="Symbol">}</a> <a id="1963" class="Symbol">→</a> <a id="1965" href="A201802.WIP.LR2e.html#1960" class="Bound">M</a> <a id="1967" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="1969" href="A201802.WIP.LR2e.html#1960" class="Bound">M</a>
    <a id="_⤅_._⨾₁_"></a><a id="1975" href="A201802.WIP.LR2e.html#1975" class="InductiveConstructor Operator">_⨾₁_</a> <a id="1980" class="Symbol">:</a> <a id="1982" class="Symbol">∀</a> <a id="1984" class="Symbol">{</a><a id="1985" href="A201802.WIP.LR2e.html#1985" class="Bound">M</a> <a id="1987" href="A201802.WIP.LR2e.html#1987" class="Bound">M″</a> <a id="1990" href="A201802.WIP.LR2e.html#1990" class="Bound">M′</a><a id="1992" class="Symbol">}</a> <a id="1994" class="Symbol">→</a> <a id="1996" href="A201802.WIP.LR2e.html#1985" class="Bound">M</a> <a id="1998" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">↦</a> <a id="2000" href="A201802.WIP.LR2e.html#1987" class="Bound">M″</a> <a id="2003" class="Symbol">→</a> <a id="2005" href="A201802.WIP.LR2e.html#1987" class="Bound">M″</a> <a id="2008" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="2010" href="A201802.WIP.LR2e.html#1990" class="Bound">M′</a>
                       <a id="2036" class="Symbol">→</a> <a id="2038" href="A201802.WIP.LR2e.html#1985" class="Bound">M</a> <a id="2040" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="2042" href="A201802.WIP.LR2e.html#1990" class="Bound">M′</a>


<a id="2047" class="Comment">-- `_⤅_` is the reflexive and transitive closure of `_↦_`</a>
<a id="_⨾ₙ_"></a><a id="2105" href="A201802.WIP.LR2e.html#2105" class="Function Operator">_⨾ₙ_</a> <a id="2110" class="Symbol">:</a> <a id="2112" class="Symbol">∀</a> <a id="2114" class="Symbol">{</a><a id="2115" href="A201802.WIP.LR2e.html#2115" class="Bound">g</a><a id="2116" class="Symbol">}</a> <a id="2118" class="Symbol">→</a> <a id="2120" class="Symbol">{</a><a id="2121" href="A201802.WIP.LR2e.html#2121" class="Bound">M</a> <a id="2123" href="A201802.WIP.LR2e.html#2123" class="Bound">M″</a> <a id="2126" href="A201802.WIP.LR2e.html#2126" class="Bound">M′</a> <a id="2129" class="Symbol">:</a> <a id="2131" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="2136" href="A201802.WIP.LR2e.html#2115" class="Bound">g</a><a id="2137" class="Symbol">}</a>
             <a id="2152" class="Symbol">→</a> <a id="2154" href="A201802.WIP.LR2e.html#2121" class="Bound">M</a> <a id="2156" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="2158" href="A201802.WIP.LR2e.html#2123" class="Bound">M″</a> <a id="2161" class="Symbol">→</a> <a id="2163" href="A201802.WIP.LR2e.html#2123" class="Bound">M″</a> <a id="2166" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="2168" href="A201802.WIP.LR2e.html#2126" class="Bound">M′</a>
             <a id="2184" class="Symbol">→</a> <a id="2186" href="A201802.WIP.LR2e.html#2121" class="Bound">M</a> <a id="2188" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="2190" href="A201802.WIP.LR2e.html#2126" class="Bound">M′</a>
<a id="2193" href="A201802.WIP.LR2e.html#1950" class="InductiveConstructor">done</a>              <a id="2211" href="A201802.WIP.LR2e.html#2105" class="Function Operator">⨾ₙ</a> <a id="2214" href="A201802.WIP.LR2e.html#2214" class="Bound">M⤅M′</a>  <a id="2220" class="Symbol">=</a> <a id="2222" href="A201802.WIP.LR2e.html#2214" class="Bound">M⤅M′</a>
<a id="2227" class="Symbol">(</a><a id="2228" href="A201802.WIP.LR2e.html#2228" class="Bound">M↦M‴</a> <a id="2233" href="A201802.WIP.LR2e.html#1975" class="InductiveConstructor Operator">⨾₁</a> <a id="2236" href="A201802.WIP.LR2e.html#2236" class="Bound">M‴⤅M″</a><a id="2241" class="Symbol">)</a> <a id="2243" href="A201802.WIP.LR2e.html#2105" class="Function Operator">⨾ₙ</a> <a id="2246" href="A201802.WIP.LR2e.html#2246" class="Bound">M″⤅M′</a> <a id="2252" class="Symbol">=</a> <a id="2254" href="A201802.WIP.LR2e.html#2228" class="Bound">M↦M‴</a> <a id="2259" href="A201802.WIP.LR2e.html#1975" class="InductiveConstructor Operator">⨾₁</a> <a id="2262" class="Symbol">(</a><a id="2263" href="A201802.WIP.LR2e.html#2236" class="Bound">M‴⤅M″</a> <a id="2269" href="A201802.WIP.LR2e.html#2105" class="Function Operator">⨾ₙ</a> <a id="2272" href="A201802.WIP.LR2e.html#2246" class="Bound">M″⤅M′</a><a id="2277" class="Symbol">)</a>


<a id="2281" class="Comment">-- `_ : M ⇓ M′` says that the term `M` evaluates to the value `M′</a>
<a id="2347" class="Keyword">infix</a> <a id="2353" class="Number">3</a> <a id="2355" href="A201802.WIP.LR2e.html#2359" class="Function Operator">_⇓_</a>
<a id="_⇓_"></a><a id="2359" href="A201802.WIP.LR2e.html#2359" class="Function Operator">_⇓_</a> <a id="2363" class="Symbol">:</a> <a id="2365" class="Symbol">∀</a> <a id="2367" class="Symbol">{</a><a id="2368" href="A201802.WIP.LR2e.html#2368" class="Bound">g</a><a id="2369" class="Symbol">}</a> <a id="2371" class="Symbol">→</a> <a id="2373" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="2378" href="A201802.WIP.LR2e.html#2368" class="Bound">g</a> <a id="2380" class="Symbol">→</a> <a id="2382" class="Symbol">(</a><a id="2383" href="A201802.WIP.LR2e.html#2383" class="Bound">M′</a> <a id="2386" class="Symbol">:</a> <a id="2388" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="2393" href="A201802.WIP.LR2e.html#2368" class="Bound">g</a><a id="2394" class="Symbol">)</a> <a id="2396" class="Symbol">→</a> <a id="2398" class="Symbol">{{</a><a id="2400" href="A201802.WIP.LR2e.html#2400" class="Bound">_</a> <a id="2402" class="Symbol">:</a> <a id="2404" href="A201802.WIP.LR2e.html#485" class="Datatype">IsVal</a> <a id="2410" href="A201802.WIP.LR2e.html#2383" class="Bound">M′</a><a id="2412" class="Symbol">}}</a> <a id="2415" class="Symbol">→</a> <a id="2417" class="PrimitiveType">Set</a>
<a id="2421" href="A201802.WIP.LR2e.html#2421" class="Bound">M</a> <a id="2423" href="A201802.WIP.LR2e.html#2359" class="Function Operator">⇓</a> <a id="2425" href="A201802.WIP.LR2e.html#2425" class="Bound">M′</a> <a id="2428" class="Symbol">=</a> <a id="2430" href="A201802.WIP.LR2e.html#2421" class="Bound">M</a> <a id="2432" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="2434" href="A201802.WIP.LR2e.html#2425" class="Bound">M′</a>


<a id="2439" class="Comment">-- `_ : M ⇓` says that the evaluation of the term `M` terminates</a>

<a id="2505" class="Comment">-- _⇓ : ∀ {g} → Term g → Set</a>
<a id="2534" class="Comment">-- M ⇓ = Σ (Term _) (\ M′ → Σ (IsVal M′) (\ iv → (M ⇓ M′) {{iv}}))</a>

<a id="_⇓"></a><a id="2602" href="A201802.WIP.LR2e.html#2602" class="Function Operator">_⇓</a> <a id="2605" class="Symbol">:</a> <a id="2607" class="Symbol">∀</a> <a id="2609" class="Symbol">{</a><a id="2610" href="A201802.WIP.LR2e.html#2610" class="Bound">g</a><a id="2611" class="Symbol">}</a> <a id="2613" class="Symbol">→</a> <a id="2615" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="2620" href="A201802.WIP.LR2e.html#2610" class="Bound">g</a> <a id="2622" class="Symbol">→</a> <a id="2624" class="PrimitiveType">Set</a>
<a id="2628" href="A201802.WIP.LR2e.html#2628" class="Bound">M</a> <a id="2630" href="A201802.WIP.LR2e.html#2602" class="Function Operator">⇓</a> <a id="2632" class="Symbol">=</a> <a id="2634" href="A201801.Prelude.html#4545" class="Record">Σ</a> <a id="2636" class="Symbol">(</a><a id="2637" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="2642" class="UnsolvedMeta Symbol">_</a><a id="2643" class="Symbol">)</a> <a id="2645" class="Symbol">(\</a> <a id="2648" href="A201802.WIP.LR2e.html#2648" class="Bound">M′</a> <a id="2651" class="Symbol">→</a> <a id="2653" class="Symbol">{!Σ″ (IsVal M′) (\ {{iv}} → (M ⇓ M′) {{iv}})!})</a>

<a id="2702" class="Comment">-- infix 4 _/_/_</a>
<a id="2719" class="Comment">-- record _⇓ {g} (M : Term g) : Set</a>
<a id="2755" class="Comment">--   where</a>
<a id="2766" class="Comment">--     constructor _/_/_</a>
<a id="2791" class="Comment">--     field</a>
<a id="2804" class="Comment">--       M′   : Term g</a>
<a id="2827" class="Comment">--       ivM′ : IsVal M′</a>
<a id="2852" class="Comment">--       M⇓M′ : (M ⇓ M′) {{ivM′}}</a>


<a id="2888" class="Comment">--------------------------------------------------------------------------------</a>


<a id="2971" class="Comment">-- `_↦_` is type-preserving</a>
<a id="2999" class="Keyword">mutual</a>
  <a id="tp↦"></a><a id="3008" href="A201802.WIP.LR2e.html#3008" class="Function">tp↦</a> <a id="3012" class="Symbol">:</a> <a id="3014" class="Symbol">∀</a> <a id="3016" class="Symbol">{</a><a id="3017" href="A201802.WIP.LR2e.html#3017" class="Bound">g</a> <a id="3019" href="A201802.WIP.LR2e.html#3019" class="Bound">M</a> <a id="3021" href="A201802.WIP.LR2e.html#3021" class="Bound">M′</a> <a id="3024" href="A201802.WIP.LR2e.html#3024" class="Bound">A</a><a id="3025" class="Symbol">}</a> <a id="3027" class="Symbol">→</a> <a id="3029" class="Symbol">{</a><a id="3030" href="A201802.WIP.LR2e.html#3030" class="Bound">Γ</a> <a id="3032" class="Symbol">:</a> <a id="3034" href="A201802.LR0.html#418" class="Function">Types</a> <a id="3040" href="A201802.WIP.LR2e.html#3017" class="Bound">g</a><a id="3041" class="Symbol">}</a>
                       <a id="3066" class="Symbol">→</a> <a id="3068" href="A201802.WIP.LR2e.html#3019" class="Bound">M</a> <a id="3070" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">↦</a> <a id="3072" href="A201802.WIP.LR2e.html#3021" class="Bound">M′</a> <a id="3075" class="Symbol">→</a> <a id="3077" href="A201802.WIP.LR2e.html#3030" class="Bound">Γ</a> <a id="3079" href="A201802.LR1.html#348" class="Datatype Operator">⊢</a> <a id="3081" href="A201802.WIP.LR2e.html#3019" class="Bound">M</a> <a id="3083" href="A201802.LR1.html#348" class="Datatype Operator">⦂</a> <a id="3085" href="A201802.WIP.LR2e.html#3024" class="Bound">A</a>
                       <a id="3110" class="Symbol">→</a> <a id="3112" href="A201802.WIP.LR2e.html#3030" class="Bound">Γ</a> <a id="3114" href="A201802.LR1.html#348" class="Datatype Operator">⊢</a> <a id="3116" href="A201802.WIP.LR2e.html#3021" class="Bound">M′</a> <a id="3119" href="A201802.LR1.html#348" class="Datatype Operator">⦂</a> <a id="3121" href="A201802.WIP.LR2e.html#3024" class="Bound">A</a>
  <a id="3125" href="A201802.WIP.LR2e.html#3008" class="Function">tp↦</a> <a id="3129" href="A201802.WIP.LR2e.html#1553" class="InductiveConstructor">step-APP-LAM</a>        <a id="3149" class="Symbol">(</a><a id="3150" href="A201802.LR1.html#549" class="InductiveConstructor">app</a> <a id="3154" class="Symbol">(</a><a id="3155" href="A201802.LR1.html#472" class="InductiveConstructor">lam</a> <a id="3159" href="A201802.WIP.LR2e.html#3159" class="Bound">𝒟</a><a id="3160" class="Symbol">)</a> <a id="3162" href="A201802.WIP.LR2e.html#3162" class="Bound">ℰ</a><a id="3163" class="Symbol">)</a> <a id="3165" class="Symbol">=</a> <a id="3167" href="A201802.LR1.html#4456" class="Function">cut</a> <a id="3171" href="A201802.WIP.LR2e.html#3162" class="Bound">ℰ</a> <a id="3173" href="A201802.WIP.LR2e.html#3159" class="Bound">𝒟</a>
  <a id="3177" href="A201802.WIP.LR2e.html#3008" class="Function">tp↦</a> <a id="3181" href="A201802.WIP.LR2e.html#1607" class="InductiveConstructor">step-IF-TRUE</a>        <a id="3201" class="Symbol">(</a><a id="3202" href="A201802.LR1.html#1307" class="InductiveConstructor">if</a> <a id="3205" href="A201802.WIP.LR2e.html#3205" class="Bound">𝒟</a> <a id="3207" href="A201802.WIP.LR2e.html#3207" class="Bound">ℰ</a> <a id="3209" href="A201802.WIP.LR2e.html#3209" class="Bound">ℱ</a><a id="3210" class="Symbol">)</a>      <a id="3217" class="Symbol">=</a> <a id="3219" href="A201802.WIP.LR2e.html#3207" class="Bound">ℰ</a>
  <a id="3223" href="A201802.WIP.LR2e.html#3008" class="Function">tp↦</a> <a id="3227" href="A201802.WIP.LR2e.html#1653" class="InductiveConstructor">step-IF-FALSE</a>       <a id="3247" class="Symbol">(</a><a id="3248" href="A201802.LR1.html#1307" class="InductiveConstructor">if</a> <a id="3251" href="A201802.WIP.LR2e.html#3251" class="Bound">𝒟</a> <a id="3253" href="A201802.WIP.LR2e.html#3253" class="Bound">ℰ</a> <a id="3255" href="A201802.WIP.LR2e.html#3255" class="Bound">ℱ</a><a id="3256" class="Symbol">)</a>      <a id="3263" class="Symbol">=</a> <a id="3265" href="A201802.WIP.LR2e.html#3255" class="Bound">ℱ</a>
  <a id="3269" href="A201802.WIP.LR2e.html#3008" class="Function">tp↦</a> <a id="3273" class="Symbol">(</a><a id="3274" href="A201802.WIP.LR2e.html#1700" class="InductiveConstructor">step-cong</a> <a id="3284" href="A201802.WIP.LR2e.html#3284" class="Bound">E</a> <a id="3286" href="A201802.WIP.LR2e.html#3286" class="Bound">M↦M′</a><a id="3290" class="Symbol">)</a> <a id="3292" href="A201802.WIP.LR2e.html#3292" class="Bound">𝒟</a>               <a id="3308" class="Symbol">=</a> <a id="3310" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3319" href="A201802.WIP.LR2e.html#3284" class="Bound">E</a> <a id="3321" href="A201802.WIP.LR2e.html#3286" class="Bound">M↦M′</a> <a id="3326" href="A201802.WIP.LR2e.html#3292" class="Bound">𝒟</a>

  <a id="cong-tp↦"></a><a id="3331" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3340" class="Symbol">:</a> <a id="3342" class="Symbol">∀</a> <a id="3344" class="Symbol">{</a><a id="3345" href="A201802.WIP.LR2e.html#3345" class="Bound">g</a> <a id="3347" href="A201802.WIP.LR2e.html#3347" class="Bound">M</a> <a id="3349" href="A201802.WIP.LR2e.html#3349" class="Bound">M′</a> <a id="3352" href="A201802.WIP.LR2e.html#3352" class="Bound">A</a><a id="3353" class="Symbol">}</a> <a id="3355" class="Symbol">→</a> <a id="3357" class="Symbol">{</a><a id="3358" href="A201802.WIP.LR2e.html#3358" class="Bound">Γ</a> <a id="3360" class="Symbol">:</a> <a id="3362" href="A201802.LR0.html#418" class="Function">Types</a> <a id="3368" href="A201802.WIP.LR2e.html#3345" class="Bound">g</a><a id="3369" class="Symbol">}</a>
                           <a id="3398" class="Symbol">→</a> <a id="3400" class="Symbol">(</a><a id="3401" href="A201802.WIP.LR2e.html#3401" class="Bound">E</a> <a id="3403" class="Symbol">:</a> <a id="3405" href="A201802.WIP.LR2e.html#936" class="Datatype">EvCx</a> <a id="3410" href="A201802.WIP.LR2e.html#3345" class="Bound">g</a><a id="3411" class="Symbol">)</a> <a id="3413" class="Symbol">→</a> <a id="3415" href="A201802.WIP.LR2e.html#3347" class="Bound">M</a> <a id="3417" href="A201802.WIP.LR2e.html#1509" class="Datatype Operator">↦</a> <a id="3419" href="A201802.WIP.LR2e.html#3349" class="Bound">M′</a> <a id="3422" class="Symbol">→</a> <a id="3424" href="A201802.WIP.LR2e.html#3358" class="Bound">Γ</a> <a id="3426" href="A201802.LR1.html#348" class="Datatype Operator">⊢</a> <a id="3428" href="A201802.WIP.LR2e.html#3401" class="Bound">E</a> <a id="3430" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="3432" href="A201802.WIP.LR2e.html#3347" class="Bound">M</a> <a id="3434" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a> <a id="3436" href="A201802.LR1.html#348" class="Datatype Operator">⦂</a> <a id="3438" href="A201802.WIP.LR2e.html#3352" class="Bound">A</a>
                           <a id="3467" class="Symbol">→</a> <a id="3469" href="A201802.WIP.LR2e.html#3358" class="Bound">Γ</a> <a id="3471" href="A201802.LR1.html#348" class="Datatype Operator">⊢</a> <a id="3473" href="A201802.WIP.LR2e.html#3401" class="Bound">E</a> <a id="3475" href="A201802.WIP.LR2e.html#1223" class="Function Operator">[</a> <a id="3477" href="A201802.WIP.LR2e.html#3349" class="Bound">M′</a> <a id="3480" href="A201802.WIP.LR2e.html#1223" class="Function Operator">]</a> <a id="3482" href="A201802.LR1.html#348" class="Datatype Operator">⦂</a> <a id="3484" href="A201802.WIP.LR2e.html#3352" class="Bound">A</a>
  <a id="3488" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3497" href="A201802.WIP.LR2e.html#969" class="InductiveConstructor">ec-[]</a>            <a id="3514" href="A201802.WIP.LR2e.html#3514" class="Bound">M↦M′</a> <a id="3519" href="A201802.WIP.LR2e.html#3519" class="Bound">𝒟</a>          <a id="3530" class="Symbol">=</a> <a id="3532" href="A201802.WIP.LR2e.html#3008" class="Function">tp↦</a> <a id="3536" href="A201802.WIP.LR2e.html#3514" class="Bound">M↦M′</a> <a id="3541" href="A201802.WIP.LR2e.html#3519" class="Bound">𝒟</a>
  <a id="3545" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3554" class="Symbol">(</a><a id="3555" href="A201802.WIP.LR2e.html#993" class="InductiveConstructor">ec-fun-APP</a> <a id="3566" href="A201802.WIP.LR2e.html#3566" class="Bound">E</a> <a id="3568" href="A201802.WIP.LR2e.html#3568" class="Bound">N</a><a id="3569" class="Symbol">)</a> <a id="3571" href="A201802.WIP.LR2e.html#3571" class="Bound">M↦M′</a> <a id="3576" class="Symbol">(</a><a id="3577" href="A201802.LR1.html#549" class="InductiveConstructor">app</a> <a id="3581" href="A201802.WIP.LR2e.html#3581" class="Bound">𝒟</a> <a id="3583" href="A201802.WIP.LR2e.html#3583" class="Bound">ℰ</a><a id="3584" class="Symbol">)</a>  <a id="3587" class="Symbol">=</a> <a id="3589" href="A201802.LR1.html#549" class="InductiveConstructor">app</a> <a id="3593" class="Symbol">(</a><a id="3594" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3603" href="A201802.WIP.LR2e.html#3566" class="Bound">E</a> <a id="3605" href="A201802.WIP.LR2e.html#3571" class="Bound">M↦M′</a> <a id="3610" href="A201802.WIP.LR2e.html#3581" class="Bound">𝒟</a><a id="3611" class="Symbol">)</a> <a id="3613" href="A201802.WIP.LR2e.html#3583" class="Bound">ℰ</a>
  <a id="3617" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3626" class="Symbol">(</a><a id="3627" href="A201802.WIP.LR2e.html#1035" class="InductiveConstructor">ec-arg-APP</a> <a id="3638" href="A201802.WIP.LR2e.html#3638" class="Bound">N</a> <a id="3640" href="A201802.WIP.LR2e.html#3640" class="Bound">E</a><a id="3641" class="Symbol">)</a> <a id="3643" href="A201802.WIP.LR2e.html#3643" class="Bound">M↦M′</a> <a id="3648" class="Symbol">(</a><a id="3649" href="A201802.LR1.html#549" class="InductiveConstructor">app</a> <a id="3653" href="A201802.WIP.LR2e.html#3653" class="Bound">𝒟</a> <a id="3655" href="A201802.WIP.LR2e.html#3655" class="Bound">ℰ</a><a id="3656" class="Symbol">)</a>  <a id="3659" class="Symbol">=</a> <a id="3661" href="A201802.LR1.html#549" class="InductiveConstructor">app</a> <a id="3665" href="A201802.WIP.LR2e.html#3653" class="Bound">𝒟</a> <a id="3667" class="Symbol">(</a><a id="3668" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3677" href="A201802.WIP.LR2e.html#3640" class="Bound">E</a> <a id="3679" href="A201802.WIP.LR2e.html#3643" class="Bound">M↦M′</a> <a id="3684" href="A201802.WIP.LR2e.html#3655" class="Bound">ℰ</a><a id="3685" class="Symbol">)</a>
  <a id="3689" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3698" class="Symbol">(</a><a id="3699" href="A201802.WIP.LR2e.html#1101" class="InductiveConstructor">ec-IF</a> <a id="3705" href="A201802.WIP.LR2e.html#3705" class="Bound">E</a> <a id="3707" href="A201802.WIP.LR2e.html#3707" class="Bound">N</a> <a id="3709" href="A201802.WIP.LR2e.html#3709" class="Bound">O</a><a id="3710" class="Symbol">)</a>    <a id="3715" href="A201802.WIP.LR2e.html#3715" class="Bound">M↦M′</a> <a id="3720" class="Symbol">(</a><a id="3721" href="A201802.LR1.html#1307" class="InductiveConstructor">if</a> <a id="3724" href="A201802.WIP.LR2e.html#3724" class="Bound">𝒟</a> <a id="3726" href="A201802.WIP.LR2e.html#3726" class="Bound">ℰ</a> <a id="3728" href="A201802.WIP.LR2e.html#3728" class="Bound">ℱ</a><a id="3729" class="Symbol">)</a> <a id="3731" class="Symbol">=</a> <a id="3733" href="A201802.LR1.html#1307" class="InductiveConstructor">if</a> <a id="3736" class="Symbol">(</a><a id="3737" href="A201802.WIP.LR2e.html#3331" class="Function">cong-tp↦</a> <a id="3746" href="A201802.WIP.LR2e.html#3705" class="Bound">E</a> <a id="3748" href="A201802.WIP.LR2e.html#3715" class="Bound">M↦M′</a> <a id="3753" href="A201802.WIP.LR2e.html#3724" class="Bound">𝒟</a><a id="3754" class="Symbol">)</a> <a id="3756" href="A201802.WIP.LR2e.html#3726" class="Bound">ℰ</a> <a id="3758" href="A201802.WIP.LR2e.html#3728" class="Bound">ℱ</a>


<a id="3762" class="Comment">-- `_⤅_` is type-preserving</a>
<a id="tp⤅"></a><a id="3790" href="A201802.WIP.LR2e.html#3790" class="Function">tp⤅</a> <a id="3794" class="Symbol">:</a> <a id="3796" class="Symbol">∀</a> <a id="3798" class="Symbol">{</a><a id="3799" href="A201802.WIP.LR2e.html#3799" class="Bound">g</a> <a id="3801" href="A201802.WIP.LR2e.html#3801" class="Bound">M</a> <a id="3803" href="A201802.WIP.LR2e.html#3803" class="Bound">M′</a> <a id="3806" href="A201802.WIP.LR2e.html#3806" class="Bound">A</a><a id="3807" class="Symbol">}</a> <a id="3809" class="Symbol">→</a> <a id="3811" class="Symbol">{</a><a id="3812" href="A201802.WIP.LR2e.html#3812" class="Bound">Γ</a> <a id="3814" class="Symbol">:</a> <a id="3816" href="A201802.LR0.html#418" class="Function">Types</a> <a id="3822" href="A201802.WIP.LR2e.html#3799" class="Bound">g</a><a id="3823" class="Symbol">}</a>
                    <a id="3845" class="Symbol">→</a> <a id="3847" href="A201802.WIP.LR2e.html#3801" class="Bound">M</a> <a id="3849" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="3851" href="A201802.WIP.LR2e.html#3803" class="Bound">M′</a> <a id="3854" class="Symbol">→</a> <a id="3856" href="A201802.WIP.LR2e.html#3812" class="Bound">Γ</a> <a id="3858" href="A201802.LR1.html#348" class="Datatype Operator">⊢</a> <a id="3860" href="A201802.WIP.LR2e.html#3801" class="Bound">M</a> <a id="3862" href="A201802.LR1.html#348" class="Datatype Operator">⦂</a> <a id="3864" href="A201802.WIP.LR2e.html#3806" class="Bound">A</a>
                    <a id="3886" class="Symbol">→</a> <a id="3888" href="A201802.WIP.LR2e.html#3812" class="Bound">Γ</a> <a id="3890" href="A201802.LR1.html#348" class="Datatype Operator">⊢</a> <a id="3892" href="A201802.WIP.LR2e.html#3803" class="Bound">M′</a> <a id="3895" href="A201802.LR1.html#348" class="Datatype Operator">⦂</a> <a id="3897" href="A201802.WIP.LR2e.html#3806" class="Bound">A</a>
<a id="3899" href="A201802.WIP.LR2e.html#3790" class="Function">tp⤅</a> <a id="3903" href="A201802.WIP.LR2e.html#1950" class="InductiveConstructor">done</a>              <a id="3921" href="A201802.WIP.LR2e.html#3921" class="Bound">𝒟</a> <a id="3923" class="Symbol">=</a> <a id="3925" href="A201802.WIP.LR2e.html#3921" class="Bound">𝒟</a>
<a id="3927" href="A201802.WIP.LR2e.html#3790" class="Function">tp⤅</a> <a id="3931" class="Symbol">(</a><a id="3932" href="A201802.WIP.LR2e.html#3932" class="Bound">M↦M″</a> <a id="3937" href="A201802.WIP.LR2e.html#1975" class="InductiveConstructor Operator">⨾₁</a> <a id="3940" href="A201802.WIP.LR2e.html#3940" class="Bound">M″⤅M′</a><a id="3945" class="Symbol">)</a> <a id="3947" href="A201802.WIP.LR2e.html#3947" class="Bound">𝒟</a> <a id="3949" class="Symbol">=</a> <a id="3951" href="A201802.WIP.LR2e.html#3790" class="Function">tp⤅</a> <a id="3955" class="Symbol">(</a><a id="3956" href="A201802.WIP.LR2e.html#3940" class="Bound">M″⤅M′</a><a id="3961" class="Symbol">)</a> <a id="3963" class="Symbol">(</a><a id="3964" href="A201802.WIP.LR2e.html#3008" class="Function">tp↦</a> <a id="3968" href="A201802.WIP.LR2e.html#3932" class="Bound">M↦M″</a> <a id="3973" href="A201802.WIP.LR2e.html#3947" class="Bound">𝒟</a><a id="3974" class="Symbol">)</a>


<a id="3978" class="Comment">--------------------------------------------------------------------------------</a>


<a id="eval-IF"></a><a id="4061" href="A201802.WIP.LR2e.html#4061" class="Function">eval-IF</a> <a id="4069" class="Symbol">:</a> <a id="4071" class="Symbol">∀</a> <a id="4073" class="Symbol">{</a><a id="4074" href="A201802.WIP.LR2e.html#4074" class="Bound">g</a><a id="4075" class="Symbol">}</a> <a id="4077" class="Symbol">→</a> <a id="4079" class="Symbol">{</a><a id="4080" href="A201802.WIP.LR2e.html#4080" class="Bound">M</a> <a id="4082" href="A201802.WIP.LR2e.html#4082" class="Bound">M′</a> <a id="4085" href="A201802.WIP.LR2e.html#4085" class="Bound">N</a> <a id="4087" href="A201802.WIP.LR2e.html#4087" class="Bound">O</a> <a id="4089" class="Symbol">:</a> <a id="4091" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="4096" href="A201802.WIP.LR2e.html#4074" class="Bound">g</a><a id="4097" class="Symbol">}</a>
                <a id="4115" class="Symbol">→</a> <a id="4117" href="A201802.WIP.LR2e.html#4080" class="Bound">M</a> <a id="4119" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="4121" href="A201802.WIP.LR2e.html#4082" class="Bound">M′</a>
                <a id="4140" class="Symbol">→</a> <a id="4142" href="A201802.LR0.html#970" class="InductiveConstructor">IF</a> <a id="4145" href="A201802.WIP.LR2e.html#4080" class="Bound">M</a> <a id="4147" href="A201802.WIP.LR2e.html#4085" class="Bound">N</a> <a id="4149" href="A201802.WIP.LR2e.html#4087" class="Bound">O</a> <a id="4151" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="4153" href="A201802.LR0.html#970" class="InductiveConstructor">IF</a> <a id="4156" href="A201802.WIP.LR2e.html#4082" class="Bound">M′</a> <a id="4159" href="A201802.WIP.LR2e.html#4085" class="Bound">N</a> <a id="4161" href="A201802.WIP.LR2e.html#4087" class="Bound">O</a>
<a id="4163" href="A201802.WIP.LR2e.html#4061" class="Function">eval-IF</a> <a id="4171" class="Symbol">{</a><a id="4172" class="Argument">N</a> <a id="4174" class="Symbol">=</a> <a id="4176" href="A201802.WIP.LR2e.html#4176" class="Bound">N</a><a id="4177" class="Symbol">}</a> <a id="4179" class="Symbol">{</a><a id="4180" href="A201802.WIP.LR2e.html#4180" class="Bound">O</a><a id="4181" class="Symbol">}</a> <a id="4183" href="A201802.WIP.LR2e.html#1950" class="InductiveConstructor">done</a>              <a id="4201" class="Symbol">=</a> <a id="4203" href="A201802.WIP.LR2e.html#1950" class="InductiveConstructor">done</a>
<a id="4208" href="A201802.WIP.LR2e.html#4061" class="Function">eval-IF</a> <a id="4216" class="Symbol">{</a><a id="4217" class="Argument">N</a> <a id="4219" class="Symbol">=</a> <a id="4221" href="A201802.WIP.LR2e.html#4221" class="Bound">N</a><a id="4222" class="Symbol">}</a> <a id="4224" class="Symbol">{</a><a id="4225" href="A201802.WIP.LR2e.html#4225" class="Bound">O</a><a id="4226" class="Symbol">}</a> <a id="4228" class="Symbol">(</a><a id="4229" href="A201802.WIP.LR2e.html#4229" class="Bound">M↦M″</a> <a id="4234" href="A201802.WIP.LR2e.html#1975" class="InductiveConstructor Operator">⨾₁</a> <a id="4237" href="A201802.WIP.LR2e.html#4237" class="Bound">M″⤅M′</a><a id="4242" class="Symbol">)</a> <a id="4244" class="Symbol">=</a> <a id="4246" href="A201802.WIP.LR2e.html#1700" class="InductiveConstructor">step-cong</a> <a id="4256" class="Symbol">(</a><a id="4257" href="A201802.WIP.LR2e.html#1101" class="InductiveConstructor">ec-IF</a> <a id="4263" href="A201802.WIP.LR2e.html#969" class="InductiveConstructor">ec-[]</a> <a id="4269" href="A201802.WIP.LR2e.html#4221" class="Bound">N</a> <a id="4271" href="A201802.WIP.LR2e.html#4225" class="Bound">O</a><a id="4272" class="Symbol">)</a> <a id="4274" href="A201802.WIP.LR2e.html#4229" class="Bound">M↦M″</a> <a id="4279" href="A201802.WIP.LR2e.html#1975" class="InductiveConstructor Operator">⨾₁</a> <a id="4282" href="A201802.WIP.LR2e.html#4061" class="Function">eval-IF</a> <a id="4290" href="A201802.WIP.LR2e.html#4237" class="Bound">M″⤅M′</a>


<a id="eval-IF-TRUE"></a><a id="4298" href="A201802.WIP.LR2e.html#4298" class="Function">eval-IF-TRUE</a> <a id="4311" class="Symbol">:</a> <a id="4313" class="Symbol">∀</a> <a id="4315" class="Symbol">{</a><a id="4316" href="A201802.WIP.LR2e.html#4316" class="Bound">g</a><a id="4317" class="Symbol">}</a> <a id="4319" class="Symbol">→</a> <a id="4321" class="Symbol">{</a><a id="4322" href="A201802.WIP.LR2e.html#4322" class="Bound">M</a> <a id="4324" href="A201802.WIP.LR2e.html#4324" class="Bound">N</a> <a id="4326" href="A201802.WIP.LR2e.html#4326" class="Bound">O</a> <a id="4328" class="Symbol">:</a> <a id="4330" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="4335" href="A201802.WIP.LR2e.html#4316" class="Bound">g</a><a id="4336" class="Symbol">}</a>
                     <a id="4359" class="Symbol">→</a> <a id="4361" href="A201802.WIP.LR2e.html#4322" class="Bound">M</a> <a id="4363" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="4365" href="A201802.LR0.html#932" class="InductiveConstructor">TRUE</a>
                     <a id="4391" class="Symbol">→</a> <a id="4393" href="A201802.LR0.html#970" class="InductiveConstructor">IF</a> <a id="4396" href="A201802.WIP.LR2e.html#4322" class="Bound">M</a> <a id="4398" href="A201802.WIP.LR2e.html#4324" class="Bound">N</a> <a id="4400" href="A201802.WIP.LR2e.html#4326" class="Bound">O</a> <a id="4402" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="4404" href="A201802.WIP.LR2e.html#4324" class="Bound">N</a>
<a id="4406" href="A201802.WIP.LR2e.html#4298" class="Function">eval-IF-TRUE</a> <a id="4419" href="A201802.WIP.LR2e.html#4419" class="Bound">M⤅TRUE</a> <a id="4426" class="Symbol">=</a> <a id="4428" href="A201802.WIP.LR2e.html#4061" class="Function">eval-IF</a> <a id="4436" href="A201802.WIP.LR2e.html#4419" class="Bound">M⤅TRUE</a> <a id="4443" href="A201802.WIP.LR2e.html#2105" class="Function Operator">⨾ₙ</a> <a id="4446" class="Symbol">(</a><a id="4447" href="A201802.WIP.LR2e.html#1607" class="InductiveConstructor">step-IF-TRUE</a> <a id="4460" href="A201802.WIP.LR2e.html#1975" class="InductiveConstructor Operator">⨾₁</a> <a id="4463" href="A201802.WIP.LR2e.html#1950" class="InductiveConstructor">done</a><a id="4467" class="Symbol">)</a>


<a id="eval-IF-FALSE"></a><a id="4471" href="A201802.WIP.LR2e.html#4471" class="Function">eval-IF-FALSE</a> <a id="4485" class="Symbol">:</a> <a id="4487" class="Symbol">∀</a> <a id="4489" class="Symbol">{</a><a id="4490" href="A201802.WIP.LR2e.html#4490" class="Bound">g</a><a id="4491" class="Symbol">}</a> <a id="4493" class="Symbol">→</a> <a id="4495" class="Symbol">{</a><a id="4496" href="A201802.WIP.LR2e.html#4496" class="Bound">M</a> <a id="4498" href="A201802.WIP.LR2e.html#4498" class="Bound">N</a> <a id="4500" href="A201802.WIP.LR2e.html#4500" class="Bound">O</a> <a id="4502" class="Symbol">:</a> <a id="4504" href="A201802.LR0.html#547" class="Datatype">Term</a> <a id="4509" href="A201802.WIP.LR2e.html#4490" class="Bound">g</a><a id="4510" class="Symbol">}</a>
                      <a id="4534" class="Symbol">→</a> <a id="4536" href="A201802.WIP.LR2e.html#4496" class="Bound">M</a> <a id="4538" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="4540" href="A201802.LR0.html#951" class="InductiveConstructor">FALSE</a>
                      <a id="4568" class="Symbol">→</a> <a id="4570" href="A201802.LR0.html#970" class="InductiveConstructor">IF</a> <a id="4573" href="A201802.WIP.LR2e.html#4496" class="Bound">M</a> <a id="4575" href="A201802.WIP.LR2e.html#4498" class="Bound">N</a> <a id="4577" href="A201802.WIP.LR2e.html#4500" class="Bound">O</a> <a id="4579" href="A201802.WIP.LR2e.html#1906" class="Datatype Operator">⤅</a> <a id="4581" href="A201802.WIP.LR2e.html#4500" class="Bound">O</a>
<a id="4583" href="A201802.WIP.LR2e.html#4471" class="Function">eval-IF-FALSE</a> <a id="4597" href="A201802.WIP.LR2e.html#4597" class="Bound">M⤅FALSE</a> <a id="4605" class="Symbol">=</a> <a id="4607" href="A201802.WIP.LR2e.html#4061" class="Function">eval-IF</a> <a id="4615" href="A201802.WIP.LR2e.html#4597" class="Bound">M⤅FALSE</a> <a id="4623" href="A201802.WIP.LR2e.html#2105" class="Function Operator">⨾ₙ</a> <a id="4626" class="Symbol">(</a><a id="4627" href="A201802.WIP.LR2e.html#1653" class="InductiveConstructor">step-IF-FALSE</a> <a id="4641" href="A201802.WIP.LR2e.html#1975" class="InductiveConstructor Operator">⨾₁</a> <a id="4644" href="A201802.WIP.LR2e.html#1950" class="InductiveConstructor">done</a><a id="4648" class="Symbol">)</a>


<a id="4652" class="Comment">-- term-IF-TRUE : ∀ {g} → {M N O : Term g}</a>
<a id="4695" class="Comment">--                      → M ⤅ TRUE → N ⇓</a>
<a id="4736" class="Comment">--                      → IF M N O ⇓</a>
<a id="4773" class="Comment">-- term-IF-TRUE M⤅TRUE (N′ , ⟪ N⤅N′ ⟫) = N′ , ⟪ eval-IF-TRUE M⤅TRUE ⨾ₙ N⤅N′ ⟫</a>


<a id="4853" class="Comment">-- term-IF-FALSE : ∀ {g} → {M N O : Term g}</a>
<a id="4897" class="Comment">--                       → M ⤅ FALSE → O ⇓</a>
<a id="4940" class="Comment">--                       → IF M N O ⇓</a>
<a id="4978" class="Comment">-- term-IF-FALSE M⤅FALSE (O′ , ⟪ O⤅O′ ⟫) = O′ , ⟪ eval-IF-FALSE M⤅FALSE ⨾ₙ O⤅O′ ⟫</a>


<a id="5062" class="Keyword">private</a>
  <a id="5072" class="Keyword">module</a> <a id="Impossible"></a><a id="5079" href="A201802.WIP.LR2e.html#5079" class="Module">Impossible</a>
    <a id="5094" class="Keyword">where</a>
      <a id="Impossible.sn"></a><a id="5106" href="A201802.WIP.LR2e.html#5106" class="Function">sn</a> <a id="5109" class="Symbol">:</a> <a id="5111" class="Symbol">∀</a> <a id="5113" class="Symbol">{</a><a id="5114" href="A201802.WIP.LR2e.html#5114" class="Bound">M</a> <a id="5116" href="A201802.WIP.LR2e.html#5116" class="Bound">A</a><a id="5117" class="Symbol">}</a> <a id="5119" class="Symbol">→</a> <a id="5121" href="A201801.Vec.html#266" class="InductiveConstructor">∙</a> <a id="5123" href="A201802.LR1.html#348" class="Datatype Operator">⊢</a> <a id="5125" href="A201802.WIP.LR2e.html#5114" class="Bound">M</a> <a id="5127" href="A201802.LR1.html#348" class="Datatype Operator">⦂</a> <a id="5129" href="A201802.WIP.LR2e.html#5116" class="Bound">A</a>
                   <a id="5150" class="Symbol">→</a> <a id="5152" href="A201802.WIP.LR2e.html#5114" class="Bound">M</a> <a id="5154" href="A201802.WIP.LR2e.html#2602" class="Function Operator">⇓</a>
      <a id="5162" href="A201802.WIP.LR2e.html#5106" class="Function">sn</a> <a id="5165" class="Symbol">(</a><a id="5166" href="A201802.LR1.html#406" class="InductiveConstructor">var</a> <a id="5170" class="Symbol">())</a>
      <a id="5180" href="A201802.WIP.LR2e.html#5106" class="Function">sn</a> <a id="5183" class="Symbol">(</a><a id="5184" href="A201802.LR1.html#472" class="InductiveConstructor">lam</a> <a id="5188" href="A201802.WIP.LR2e.html#5188" class="Bound">𝒟</a><a id="5189" class="Symbol">)</a>    <a id="5194" class="Symbol">=</a> <a id="5196" class="Symbol">{!LAM _ , ⟪ done ⟫!}</a>
      <a id="5223" href="A201802.WIP.LR2e.html#5106" class="Function">sn</a> <a id="5226" class="Symbol">(</a><a id="5227" href="A201802.LR1.html#549" class="InductiveConstructor">app</a> <a id="5231" href="A201802.WIP.LR2e.html#5231" class="Bound">𝒟</a> <a id="5233" href="A201802.WIP.LR2e.html#5233" class="Bound">ℰ</a><a id="5234" class="Symbol">)</a>  <a id="5237" class="Symbol">=</a> <a id="5239" class="Symbol">{!!}</a>
      <a id="5250" href="A201802.WIP.LR2e.html#5106" class="Function">sn</a> <a id="5253" href="A201802.LR1.html#1255" class="InductiveConstructor">true</a>       <a id="5264" class="Symbol">=</a> <a id="5266" class="Symbol">{!TRUE , ⟪ done ⟫!}</a>
      <a id="5292" href="A201802.WIP.LR2e.html#5106" class="Function">sn</a> <a id="5295" href="A201802.LR1.html#1280" class="InductiveConstructor">false</a>      <a id="5306" class="Symbol">=</a> <a id="5308" class="Symbol">{!FALSE , ⟪ done ⟫!}</a>
      <a id="5335" href="A201802.WIP.LR2e.html#5106" class="CatchallClause Function">sn</a><a id="5337" class="CatchallClause"> </a><a id="5338" class="CatchallClause Symbol">_</a>          <a id="5349" class="Symbol">=</a> <a id="5351" class="Symbol">{!!}</a>
      <a id="5362" class="Comment">-- sn (if 𝒟 ℰ ℱ) with sn 𝒟</a>
      <a id="5395" class="Comment">-- sn (if 𝒟 ℰ ℱ) | M′     , ⟪ M⤅M′ ⟫ with tp⤅ M⤅M′ 𝒟</a>
      <a id="5454" class="Comment">-- sn (if 𝒟 ℰ ℱ) | LAM M″ , ⟪_⟫ {{val-LAM}}   M⤅LAM-M″ | ()</a>
      <a id="5520" class="Comment">-- sn (if 𝒟 ℰ ℱ) | TRUE   , ⟪_⟫ {{val-TRUE}}  M⤅TRUE   | true  = term-IF-TRUE M⤅TRUE (sn ℰ)</a>
      <a id="5618" class="Comment">-- sn (if 𝒟 ℰ ℱ) | FALSE  , ⟪_⟫ {{val-FALSE}} M⤅FALSE  | false = term-IF-FALSE M⤅FALSE (sn ℱ)</a>


<a id="5714" class="Comment">--------------------------------------------------------------------------------</a>
</pre></body></html>