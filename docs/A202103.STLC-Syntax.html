<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>A202103.STLC-Syntax</title><link rel="stylesheet" href="AgdaPP.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="A202103.STLC-Syntax.html" class="Module">A202103.STLC-Syntax</a> <a id="28" class="Keyword">where</a>

<a id="35" class="Keyword">open</a> <a id="40" class="Keyword">import</a> <a id="47" href="A202103.Prelude.html" class="Module">A202103.Prelude</a> <a id="63" class="Keyword">public</a>
<a id="70" class="Keyword">open</a> <a id="75" class="Keyword">import</a> <a id="82" href="A202103.Category.html" class="Module">A202103.Category</a> <a id="99" class="Keyword">public</a>
<a id="106" class="Keyword">open</a> <a id="111" class="Keyword">import</a> <a id="118" href="A202103.List.html" class="Module">A202103.List</a> <a id="131" class="Keyword">public</a>
<a id="138" class="Keyword">open</a> <a id="143" class="Keyword">import</a> <a id="150" href="A202103.GenericRenaming.html" class="Module">A202103.GenericRenaming</a> <a id="174" class="Keyword">public</a>
<a id="181" class="Keyword">import</a> <a id="188" href="A202103.GenericSubstitution.html" class="Module">A202103.GenericSubstitution</a>
<a id="216" class="Keyword">import</a> <a id="223" href="A202103.GenericSubstitution-Part2.html" class="Module">A202103.GenericSubstitution-Part2</a>
<a id="257" class="Keyword">import</a> <a id="264" href="A202103.GenericSubstitution-Part3.html" class="Module">A202103.GenericSubstitution-Part3</a>

<a id="299" class="Comment">------------------------------------------------------------------------------</a>

<a id="379" class="Comment">-- Types.</a>
<a id="389" class="Keyword">infixr</a> <a id="396" class="Number">7</a> <a id="398" href="A202103.STLC-Syntax.html#439" class="InductiveConstructor Operator">_⊃_</a>
<a id="402" class="Keyword">data</a> <a id="Type"></a><a id="407" href="A202103.STLC-Syntax.html#407" class="Datatype">Type</a> <a id="412" class="Symbol">:</a> <a id="414" class="PrimitiveType">Set</a> <a id="418" class="Keyword">where</a>
  <a id="Type.◦"></a><a id="426" href="A202103.STLC-Syntax.html#426" class="InductiveConstructor">◦</a>   <a id="430" class="Symbol">:</a> <a id="432" href="A202103.STLC-Syntax.html#407" class="Datatype">Type</a>
  <a id="Type._⊃_"></a><a id="439" href="A202103.STLC-Syntax.html#439" class="InductiveConstructor Operator">_⊃_</a> <a id="443" class="Symbol">:</a> <a id="445" href="A202103.STLC-Syntax.html#407" class="Datatype">Type</a> <a id="450" class="Symbol">→</a> <a id="452" href="A202103.STLC-Syntax.html#407" class="Datatype">Type</a> <a id="457" class="Symbol">→</a> <a id="459" href="A202103.STLC-Syntax.html#407" class="Datatype">Type</a>

<a id="465" class="Comment">-- Intrinsically well-typed terms.</a>
<a id="500" class="Keyword">infix</a> <a id="506" class="Number">3</a> <a id="508" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">_⊢_</a>
<a id="512" class="Keyword">data</a> <a id="_⊢_"></a><a id="517" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">_⊢_</a> <a id="521" class="Symbol">(</a><a id="522" href="A202103.STLC-Syntax.html#522" class="Bound">Γ</a> <a id="524" class="Symbol">:</a> <a id="526" href="A202103.List.html#142" class="Datatype">List</a> <a id="531" href="A202103.STLC-Syntax.html#407" class="Datatype">Type</a><a id="535" class="Symbol">)</a> <a id="537" class="Symbol">:</a> <a id="539" href="A202103.STLC-Syntax.html#407" class="Datatype">Type</a> <a id="544" class="Symbol">→</a> <a id="546" class="PrimitiveType">Set</a> <a id="550" class="Keyword">where</a>
  <a id="_⊢_.var"></a><a id="558" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="562" class="Symbol">:</a> <a id="564" class="Symbol">∀</a> <a id="566" class="Symbol">{</a><a id="567" href="A202103.STLC-Syntax.html#567" class="Bound">A</a><a id="568" class="Symbol">}</a> <a id="570" class="Symbol">→</a> <a id="572" href="A202103.STLC-Syntax.html#522" class="Bound">Γ</a> <a id="574" href="A202103.List.html#238" class="Datatype Operator">∋</a> <a id="576" href="A202103.STLC-Syntax.html#567" class="Bound">A</a> <a id="578" class="Symbol">→</a> <a id="580" href="A202103.STLC-Syntax.html#522" class="Bound">Γ</a> <a id="582" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="584" href="A202103.STLC-Syntax.html#567" class="Bound">A</a>
  <a id="_⊢_.lam"></a><a id="588" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="592" class="Symbol">:</a> <a id="594" class="Symbol">∀</a> <a id="596" class="Symbol">{</a><a id="597" href="A202103.STLC-Syntax.html#597" class="Bound">A</a> <a id="599" href="A202103.STLC-Syntax.html#599" class="Bound">B</a><a id="600" class="Symbol">}</a> <a id="602" class="Symbol">→</a> <a id="604" href="A202103.STLC-Syntax.html#522" class="Bound">Γ</a> <a id="606" href="A202103.List.html#194" class="InductiveConstructor Operator">,</a> <a id="608" href="A202103.STLC-Syntax.html#597" class="Bound">A</a> <a id="610" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="612" href="A202103.STLC-Syntax.html#599" class="Bound">B</a> <a id="614" class="Symbol">→</a> <a id="616" href="A202103.STLC-Syntax.html#522" class="Bound">Γ</a> <a id="618" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="620" href="A202103.STLC-Syntax.html#597" class="Bound">A</a> <a id="622" href="A202103.STLC-Syntax.html#439" class="InductiveConstructor Operator">⊃</a> <a id="624" href="A202103.STLC-Syntax.html#599" class="Bound">B</a>
  <a id="_⊢_.app"></a><a id="628" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="632" class="Symbol">:</a> <a id="634" class="Symbol">∀</a> <a id="636" class="Symbol">{</a><a id="637" href="A202103.STLC-Syntax.html#637" class="Bound">A</a> <a id="639" href="A202103.STLC-Syntax.html#639" class="Bound">B</a><a id="640" class="Symbol">}</a> <a id="642" class="Symbol">→</a> <a id="644" href="A202103.STLC-Syntax.html#522" class="Bound">Γ</a> <a id="646" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="648" href="A202103.STLC-Syntax.html#637" class="Bound">A</a> <a id="650" href="A202103.STLC-Syntax.html#439" class="InductiveConstructor Operator">⊃</a> <a id="652" href="A202103.STLC-Syntax.html#639" class="Bound">B</a> <a id="654" class="Symbol">→</a> <a id="656" href="A202103.STLC-Syntax.html#522" class="Bound">Γ</a> <a id="658" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="660" href="A202103.STLC-Syntax.html#637" class="Bound">A</a> <a id="662" class="Symbol">→</a> <a id="664" href="A202103.STLC-Syntax.html#522" class="Bound">Γ</a> <a id="666" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="668" href="A202103.STLC-Syntax.html#639" class="Bound">B</a>

<a id="671" class="Comment">------------------------------------------------------------------------------</a>

<a id="751" class="Comment">-- To rename (all indices in) a term, or monotonicity of `_⊢_` wrt. renaming.</a>
<a id="ren"></a><a id="829" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="833" class="Symbol">:</a> <a id="835" class="Symbol">∀</a> <a id="837" class="Symbol">{</a><a id="838" href="A202103.STLC-Syntax.html#838" class="Bound">Γ</a> <a id="840" href="A202103.STLC-Syntax.html#840" class="Bound">Γ′</a> <a id="843" href="A202103.STLC-Syntax.html#843" class="Bound">A</a><a id="844" class="Symbol">}</a> <a id="846" class="Symbol">→</a> <a id="848" href="A202103.STLC-Syntax.html#840" class="Bound">Γ′</a> <a id="851" href="A202103.GenericRenaming.html#291" class="Function Operator">⊒</a> <a id="853" href="A202103.STLC-Syntax.html#838" class="Bound">Γ</a> <a id="855" class="Symbol">→</a> <a id="857" href="A202103.STLC-Syntax.html#838" class="Bound">Γ</a> <a id="859" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="861" href="A202103.STLC-Syntax.html#843" class="Bound">A</a> <a id="863" class="Symbol">→</a> <a id="865" href="A202103.STLC-Syntax.html#840" class="Bound">Γ′</a> <a id="868" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="870" href="A202103.STLC-Syntax.html#843" class="Bound">A</a>
<a id="872" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="876" href="A202103.STLC-Syntax.html#876" class="Bound">η</a> <a id="878" class="Symbol">(</a><a id="879" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="883" href="A202103.STLC-Syntax.html#883" class="Bound">x</a><a id="884" class="Symbol">)</a>     <a id="890" class="Symbol">=</a> <a id="892" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="896" class="Symbol">(</a><a id="897" href="A202103.STLC-Syntax.html#876" class="Bound">η</a> <a id="899" href="A202103.STLC-Syntax.html#883" class="Bound">x</a><a id="900" class="Symbol">)</a>
<a id="902" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="906" href="A202103.STLC-Syntax.html#906" class="Bound">η</a> <a id="908" class="Symbol">(</a><a id="909" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="913" href="A202103.STLC-Syntax.html#913" class="Bound">t</a><a id="914" class="Symbol">)</a>     <a id="920" class="Symbol">=</a> <a id="922" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="926" class="Symbol">(</a><a id="927" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="931" class="Symbol">(</a><a id="932" href="A202103.GenericRenaming.html#2806" class="Function">liftr</a> <a id="938" href="A202103.STLC-Syntax.html#906" class="Bound">η</a><a id="939" class="Symbol">)</a> <a id="941" href="A202103.STLC-Syntax.html#913" class="Bound">t</a><a id="942" class="Symbol">)</a>
<a id="944" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="948" href="A202103.STLC-Syntax.html#948" class="Bound">η</a> <a id="950" class="Symbol">(</a><a id="951" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="955" href="A202103.STLC-Syntax.html#955" class="Bound">t₁</a> <a id="958" href="A202103.STLC-Syntax.html#958" class="Bound">t₂</a><a id="960" class="Symbol">)</a> <a id="962" class="Symbol">=</a> <a id="964" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="968" class="Symbol">(</a><a id="969" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="973" href="A202103.STLC-Syntax.html#948" class="Bound">η</a> <a id="975" href="A202103.STLC-Syntax.html#955" class="Bound">t₁</a><a id="977" class="Symbol">)</a> <a id="979" class="Symbol">(</a><a id="980" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="984" href="A202103.STLC-Syntax.html#948" class="Bound">η</a> <a id="986" href="A202103.STLC-Syntax.html#958" class="Bound">t₂</a><a id="988" class="Symbol">)</a>

<a id="991" class="Comment">-- Identity of renaming a term.</a>
<a id="id-ren"></a><a id="1023" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a> <a id="1030" class="Symbol">:</a> <a id="1032" class="Symbol">∀</a> <a id="1034" class="Symbol">{</a><a id="1035" href="A202103.STLC-Syntax.html#1035" class="Bound">Γ</a> <a id="1037" href="A202103.STLC-Syntax.html#1037" class="Bound">A</a><a id="1038" class="Symbol">}</a> <a id="1040" class="Symbol">(</a><a id="1041" href="A202103.STLC-Syntax.html#1041" class="Bound">t</a> <a id="1043" class="Symbol">:</a> <a id="1045" href="A202103.STLC-Syntax.html#1035" class="Bound">Γ</a> <a id="1047" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="1049" href="A202103.STLC-Syntax.html#1037" class="Bound">A</a><a id="1050" class="Symbol">)</a> <a id="1052" class="Symbol">→</a>
         <a id="1063" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="1067" href="A202103.GenericRenaming.html#858" class="Function">idr</a> <a id="1071" href="A202103.STLC-Syntax.html#1041" class="Bound">t</a> <a id="1073" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="1075" href="A202103.STLC-Syntax.html#1041" class="Bound">t</a>
<a id="1077" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a> <a id="1084" class="Symbol">(</a><a id="1085" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="1089" href="A202103.STLC-Syntax.html#1089" class="Bound">x</a><a id="1090" class="Symbol">)</a>     <a id="1096" class="Symbol">=</a> <a id="1098" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="1103" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a> <a id="1110" class="Symbol">(</a><a id="1111" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="1115" href="A202103.STLC-Syntax.html#1115" class="Bound">t</a><a id="1116" class="Symbol">)</a>     <a id="1122" class="Symbol">=</a> <a id="1124" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="1128" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="1130" class="Symbol">(</a> <a id="1132" href="Function.html#1300" class="Function">flip</a> <a id="1137" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="1141" href="A202103.STLC-Syntax.html#1115" class="Bound">t</a> <a id="1143" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="1145" href="A202103.Prelude.html#1505" class="Postulate">fu′</a> <a id="1149" class="Symbol">(</a><a id="1150" href="A202103.Prelude.html#1398" class="Postulate">fu</a> <a id="1153" href="A202103.GenericRenaming.html#2937" class="Function">id-liftr</a><a id="1161" class="Symbol">)</a>
                           <a id="1190" href="A202103.Prelude.html#993" class="Function Operator">⋮</a> <a id="1192" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a> <a id="1199" href="A202103.STLC-Syntax.html#1115" class="Bound">t</a><a id="1200" class="Symbol">)</a>
<a id="1202" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a> <a id="1209" class="Symbol">(</a><a id="1210" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="1214" href="A202103.STLC-Syntax.html#1214" class="Bound">t₁</a> <a id="1217" href="A202103.STLC-Syntax.html#1217" class="Bound">t₂</a><a id="1219" class="Symbol">)</a> <a id="1221" class="Symbol">=</a> <a id="1223" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="1227" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="1229" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a> <a id="1236" href="A202103.STLC-Syntax.html#1214" class="Bound">t₁</a> <a id="1239" href="A202103.Prelude.html#1210" class="Function Operator">⊗</a> <a id="1241" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a> <a id="1248" href="A202103.STLC-Syntax.html#1217" class="Bound">t₂</a>

<a id="1252" class="Comment">-- Compatibility of renaming a term and composing renamings.</a>
<a id="1313" class="Comment">-- XXX: Was `ren○`.</a>
<a id="comp-ren-renr"></a><a id="1333" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a> <a id="1347" class="Symbol">:</a> <a id="1349" class="Symbol">∀</a> <a id="1351" class="Symbol">{</a><a id="1352" href="A202103.STLC-Syntax.html#1352" class="Bound">Γ</a> <a id="1354" href="A202103.STLC-Syntax.html#1354" class="Bound">Γ′</a> <a id="1357" href="A202103.STLC-Syntax.html#1357" class="Bound">Γ″</a> <a id="1360" href="A202103.STLC-Syntax.html#1360" class="Bound">A</a><a id="1361" class="Symbol">}</a> <a id="1363" class="Symbol">(</a><a id="1364" href="A202103.STLC-Syntax.html#1364" class="Bound">η′</a> <a id="1367" class="Symbol">:</a> <a id="1369" href="A202103.STLC-Syntax.html#1357" class="Bound">Γ″</a> <a id="1372" href="A202103.GenericRenaming.html#291" class="Function Operator">⊒</a> <a id="1374" href="A202103.STLC-Syntax.html#1354" class="Bound">Γ′</a><a id="1376" class="Symbol">)</a> <a id="1378" class="Symbol">(</a><a id="1379" href="A202103.STLC-Syntax.html#1379" class="Bound">η</a> <a id="1381" class="Symbol">:</a> <a id="1383" href="A202103.STLC-Syntax.html#1354" class="Bound">Γ′</a> <a id="1386" href="A202103.GenericRenaming.html#291" class="Function Operator">⊒</a> <a id="1388" href="A202103.STLC-Syntax.html#1352" class="Bound">Γ</a><a id="1389" class="Symbol">)</a> <a id="1391" class="Symbol">(</a><a id="1392" href="A202103.STLC-Syntax.html#1392" class="Bound">t</a> <a id="1394" class="Symbol">:</a> <a id="1396" href="A202103.STLC-Syntax.html#1352" class="Bound">Γ</a> <a id="1398" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="1400" href="A202103.STLC-Syntax.html#1360" class="Bound">A</a><a id="1401" class="Symbol">)</a> <a id="1403" class="Symbol">→</a>
                <a id="1421" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="1425" class="Symbol">(</a><a id="1426" href="A202103.GenericRenaming.html#998" class="Function">renr</a> <a id="1431" href="A202103.STLC-Syntax.html#1364" class="Bound">η′</a> <a id="1434" href="A202103.STLC-Syntax.html#1379" class="Bound">η</a><a id="1435" class="Symbol">)</a> <a id="1437" href="A202103.STLC-Syntax.html#1392" class="Bound">t</a> <a id="1439" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="1441" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="1445" href="A202103.STLC-Syntax.html#1364" class="Bound">η′</a> <a id="1448" class="Symbol">(</a><a id="1449" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="1453" href="A202103.STLC-Syntax.html#1379" class="Bound">η</a> <a id="1455" href="A202103.STLC-Syntax.html#1392" class="Bound">t</a><a id="1456" class="Symbol">)</a>
<a id="1458" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a> <a id="1472" href="A202103.STLC-Syntax.html#1472" class="Bound">η′</a> <a id="1475" href="A202103.STLC-Syntax.html#1475" class="Bound">η</a> <a id="1477" class="Symbol">(</a><a id="1478" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="1482" href="A202103.STLC-Syntax.html#1482" class="Bound">x</a><a id="1483" class="Symbol">)</a>     <a id="1489" class="Symbol">=</a> <a id="1491" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="1496" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a> <a id="1510" href="A202103.STLC-Syntax.html#1510" class="Bound">η′</a> <a id="1513" href="A202103.STLC-Syntax.html#1513" class="Bound">η</a> <a id="1515" class="Symbol">(</a><a id="1516" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="1520" href="A202103.STLC-Syntax.html#1520" class="Bound">t</a><a id="1521" class="Symbol">)</a>     <a id="1527" class="Symbol">=</a> <a id="1529" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="1533" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="1535" class="Symbol">(</a> <a id="1537" href="Function.html#1300" class="Function">flip</a> <a id="1542" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="1546" href="A202103.STLC-Syntax.html#1520" class="Bound">t</a> <a id="1548" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="1550" href="A202103.Prelude.html#1505" class="Postulate">fu′</a> <a id="1554" class="Symbol">(</a><a id="1555" href="A202103.Prelude.html#1398" class="Postulate">fu</a> <a id="1558" class="Symbol">(</a><a id="1559" href="A202103.GenericRenaming.html#3120" class="Function">comp-liftr-renr</a> <a id="1575" href="A202103.STLC-Syntax.html#1510" class="Bound">η′</a> <a id="1578" href="A202103.STLC-Syntax.html#1513" class="Bound">η</a><a id="1579" class="Symbol">))</a>
                                       <a id="1621" href="A202103.Prelude.html#993" class="Function Operator">⋮</a> <a id="1623" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a> <a id="1637" class="Symbol">(</a><a id="1638" href="A202103.GenericRenaming.html#2806" class="Function">liftr</a> <a id="1644" href="A202103.STLC-Syntax.html#1510" class="Bound">η′</a><a id="1646" class="Symbol">)</a> <a id="1648" class="Symbol">(</a><a id="1649" href="A202103.GenericRenaming.html#2806" class="Function">liftr</a> <a id="1655" href="A202103.STLC-Syntax.html#1513" class="Bound">η</a><a id="1656" class="Symbol">)</a> <a id="1658" href="A202103.STLC-Syntax.html#1520" class="Bound">t</a><a id="1659" class="Symbol">)</a>
<a id="1661" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a> <a id="1675" href="A202103.STLC-Syntax.html#1675" class="Bound">η′</a> <a id="1678" href="A202103.STLC-Syntax.html#1678" class="Bound">η</a> <a id="1680" class="Symbol">(</a><a id="1681" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="1685" href="A202103.STLC-Syntax.html#1685" class="Bound">t₁</a> <a id="1688" href="A202103.STLC-Syntax.html#1688" class="Bound">t₂</a><a id="1690" class="Symbol">)</a> <a id="1692" class="Symbol">=</a> <a id="1694" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="1698" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="1700" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a> <a id="1714" href="A202103.STLC-Syntax.html#1675" class="Bound">η′</a> <a id="1717" href="A202103.STLC-Syntax.html#1678" class="Bound">η</a> <a id="1719" href="A202103.STLC-Syntax.html#1685" class="Bound">t₁</a> <a id="1722" href="A202103.Prelude.html#1210" class="Function Operator">⊗</a> <a id="1724" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a> <a id="1738" href="A202103.STLC-Syntax.html#1675" class="Bound">η′</a> <a id="1741" href="A202103.STLC-Syntax.html#1678" class="Bound">η</a> <a id="1743" href="A202103.STLC-Syntax.html#1688" class="Bound">t₂</a>

<a id="1747" class="Comment">-- Renaming a term yields a presheaf.</a>
<a id="Ren"></a><a id="1785" href="A202103.STLC-Syntax.html#1785" class="Function">Ren</a> <a id="1789" class="Symbol">:</a> <a id="1791" class="Symbol">∀</a> <a id="1793" href="A202103.STLC-Syntax.html#1793" class="Bound">A</a> <a id="1795" class="Symbol">→</a> <a id="1797" href="A202103.Category.html#1732" class="Function">Presheaf</a> <a id="1806" href="A202103.GenericRenaming.html#1588" class="Function">REN</a> <a id="1810" class="Symbol">(</a><a id="1811" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">_⊢</a> <a id="1814" href="A202103.STLC-Syntax.html#1793" class="Bound">A</a><a id="1815" class="Symbol">)</a>
<a id="1817" href="A202103.STLC-Syntax.html#1785" class="Function">Ren</a> <a id="1821" href="A202103.STLC-Syntax.html#1821" class="Bound">A</a> <a id="1823" class="Symbol">=</a> <a id="1825" class="Keyword">record</a>
          <a id="1842" class="Symbol">{</a> <a id="1844" href="A202103.Category.html#1182" class="Field">φ</a>     <a id="1850" class="Symbol">=</a> <a id="1852" href="A202103.STLC-Syntax.html#829" class="Function">ren</a>
          <a id="1866" class="Symbol">;</a> <a id="1868" href="A202103.Category.html#1228" class="Field">idφ</a>   <a id="1874" class="Symbol">=</a> <a id="1876" href="A202103.Prelude.html#1398" class="Postulate">fu</a> <a id="1879" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a>
          <a id="1896" class="Symbol">;</a> <a id="1898" href="A202103.Category.html#1290" class="Field">compφ</a> <a id="1904" class="Symbol">=</a> <a id="1906" class="Symbol">λ</a> <a id="1908" href="A202103.STLC-Syntax.html#1908" class="Bound">η</a> <a id="1910" href="A202103.STLC-Syntax.html#1910" class="Bound">η′</a> <a id="1913" class="Symbol">→</a> <a id="1915" href="A202103.Prelude.html#1398" class="Postulate">fu</a> <a id="1918" class="Symbol">(</a><a id="1919" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a> <a id="1933" href="A202103.STLC-Syntax.html#1910" class="Bound">η′</a> <a id="1936" href="A202103.STLC-Syntax.html#1908" class="Bound">η</a><a id="1937" class="Symbol">)</a>
          <a id="1949" class="Symbol">}</a>

<a id="1952" class="Keyword">private</a>
  <a id="1962" class="Comment">-- TODO: Close to a presheaf.</a>
  <a id="rs"></a><a id="1994" href="A202103.STLC-Syntax.html#1994" class="Function">rs</a> <a id="1997" class="Symbol">:</a> <a id="1999" href="A202103.GenericRenaming.html#3458" class="Record">RenSpec</a>
  <a id="2009" href="A202103.STLC-Syntax.html#1994" class="Function">rs</a> <a id="2012" class="Symbol">=</a> <a id="2014" class="Keyword">record</a>
         <a id="2030" class="Symbol">{</a> <a id="2032" href="A202103.GenericRenaming.html#3513" class="Field Operator">_⊢_</a>           <a id="2046" class="Symbol">=</a> <a id="2048" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">_⊢_</a>
         <a id="2061" class="Symbol">;</a> <a id="2063" href="A202103.GenericRenaming.html#3543" class="Field">ren</a>           <a id="2077" class="Symbol">=</a> <a id="2079" href="A202103.STLC-Syntax.html#829" class="Function">ren</a>
         <a id="2092" class="Symbol">;</a> <a id="2094" href="A202103.GenericRenaming.html#3591" class="Field">id-ren</a>        <a id="2108" class="Symbol">=</a> <a id="2110" href="A202103.STLC-Syntax.html#1023" class="Function">id-ren</a>
         <a id="2126" class="Symbol">;</a> <a id="2128" href="A202103.GenericRenaming.html#3654" class="Field">comp-ren-renr</a> <a id="2142" class="Symbol">=</a> <a id="2144" href="A202103.STLC-Syntax.html#1333" class="Function">comp-ren-renr</a>
         <a id="2167" class="Symbol">;</a> <a id="2169" href="A202103.GenericRenaming.html#3788" class="Field">var</a>           <a id="2183" class="Symbol">=</a> <a id="2185" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a>
         <a id="2198" class="Symbol">;</a> <a id="2200" href="A202103.GenericRenaming.html#3823" class="Field">comp-ren-var</a>  <a id="2214" class="Symbol">=</a> <a id="2216" class="Symbol">λ</a> <a id="2218" href="A202103.STLC-Syntax.html#2218" class="Bound">η</a> <a id="2220" href="A202103.STLC-Syntax.html#2220" class="Bound">x</a> <a id="2222" class="Symbol">→</a> <a id="2224" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
         <a id="2238" class="Symbol">}</a>

<a id="2241" class="Comment">------------------------------------------------------------------------------</a>

<a id="2321" class="Keyword">open</a> <a id="2326" href="A202103.GenericSubstitution.html" class="Module">A202103.GenericSubstitution</a> <a id="2354" href="A202103.STLC-Syntax.html#1994" class="Function">rs</a> <a id="2357" class="Keyword">public</a>

<a id="2365" class="Comment">-- To substitute (all indices in) a term, or monotonicity of `_⊢_` wrt. substituting.</a>
<a id="sub"></a><a id="2451" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2455" class="Symbol">:</a> <a id="2457" class="Symbol">∀</a> <a id="2459" class="Symbol">{</a><a id="2460" href="A202103.STLC-Syntax.html#2460" class="Bound">Γ</a> <a id="2462" href="A202103.STLC-Syntax.html#2462" class="Bound">Ξ</a> <a id="2464" href="A202103.STLC-Syntax.html#2464" class="Bound">A</a><a id="2465" class="Symbol">}</a> <a id="2467" class="Symbol">→</a> <a id="2469" href="A202103.STLC-Syntax.html#2460" class="Bound">Γ</a> <a id="2471" href="A202103.GenericSubstitution.html#1509" class="Function Operator">⊢*</a> <a id="2474" href="A202103.STLC-Syntax.html#2462" class="Bound">Ξ</a> <a id="2476" class="Symbol">→</a> <a id="2478" href="A202103.STLC-Syntax.html#2462" class="Bound">Ξ</a> <a id="2480" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="2482" href="A202103.STLC-Syntax.html#2464" class="Bound">A</a> <a id="2484" class="Symbol">→</a> <a id="2486" href="A202103.STLC-Syntax.html#2460" class="Bound">Γ</a> <a id="2488" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="2490" href="A202103.STLC-Syntax.html#2464" class="Bound">A</a>
<a id="2492" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2496" href="A202103.STLC-Syntax.html#2496" class="Bound">σ</a> <a id="2498" class="Symbol">(</a><a id="2499" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="2503" href="A202103.STLC-Syntax.html#2503" class="Bound">x</a><a id="2504" class="Symbol">)</a>     <a id="2510" class="Symbol">=</a> <a id="2512" href="A202103.STLC-Syntax.html#2496" class="Bound">σ</a> <a id="2514" href="A202103.STLC-Syntax.html#2503" class="Bound">x</a>
<a id="2516" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2520" href="A202103.STLC-Syntax.html#2520" class="Bound">σ</a> <a id="2522" class="Symbol">(</a><a id="2523" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="2527" href="A202103.STLC-Syntax.html#2527" class="Bound">t</a><a id="2528" class="Symbol">)</a>     <a id="2534" class="Symbol">=</a> <a id="2536" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="2540" class="Symbol">(</a><a id="2541" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2545" class="Symbol">(</a><a id="2546" href="A202103.GenericSubstitution.html#2751" class="Function">lifts</a> <a id="2552" href="A202103.STLC-Syntax.html#2520" class="Bound">σ</a><a id="2553" class="Symbol">)</a> <a id="2555" href="A202103.STLC-Syntax.html#2527" class="Bound">t</a><a id="2556" class="Symbol">)</a>
<a id="2558" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2562" href="A202103.STLC-Syntax.html#2562" class="Bound">σ</a> <a id="2564" class="Symbol">(</a><a id="2565" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="2569" href="A202103.STLC-Syntax.html#2569" class="Bound">t₁</a> <a id="2572" href="A202103.STLC-Syntax.html#2572" class="Bound">t₂</a><a id="2574" class="Symbol">)</a> <a id="2576" class="Symbol">=</a> <a id="2578" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="2582" class="Symbol">(</a><a id="2583" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2587" href="A202103.STLC-Syntax.html#2562" class="Bound">σ</a> <a id="2589" href="A202103.STLC-Syntax.html#2569" class="Bound">t₁</a><a id="2591" class="Symbol">)</a> <a id="2593" class="Symbol">(</a><a id="2594" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2598" href="A202103.STLC-Syntax.html#2562" class="Bound">σ</a> <a id="2600" href="A202103.STLC-Syntax.html#2572" class="Bound">t₂</a><a id="2602" class="Symbol">)</a>

<a id="2605" class="Comment">-- Identity of substituting a term.</a>
<a id="id-sub"></a><a id="2641" href="A202103.STLC-Syntax.html#2641" class="Function">id-sub</a> <a id="2648" class="Symbol">:</a> <a id="2650" class="Symbol">∀</a> <a id="2652" class="Symbol">{</a><a id="2653" href="A202103.STLC-Syntax.html#2653" class="Bound">Γ</a> <a id="2655" href="A202103.STLC-Syntax.html#2655" class="Bound">A</a><a id="2656" class="Symbol">}</a> <a id="2658" class="Symbol">(</a><a id="2659" href="A202103.STLC-Syntax.html#2659" class="Bound">t</a> <a id="2661" class="Symbol">:</a> <a id="2663" href="A202103.STLC-Syntax.html#2653" class="Bound">Γ</a> <a id="2665" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="2667" href="A202103.STLC-Syntax.html#2655" class="Bound">A</a><a id="2668" class="Symbol">)</a> <a id="2670" class="Symbol">→</a>
         <a id="2681" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2685" href="A202103.GenericSubstitution.html#2555" class="Function">ids</a> <a id="2689" href="A202103.STLC-Syntax.html#2659" class="Bound">t</a> <a id="2691" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2693" href="A202103.STLC-Syntax.html#2659" class="Bound">t</a>
<a id="2695" href="A202103.STLC-Syntax.html#2641" class="Function">id-sub</a> <a id="2702" class="Symbol">(</a><a id="2703" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="2707" href="A202103.STLC-Syntax.html#2707" class="Bound">x</a><a id="2708" class="Symbol">)</a>     <a id="2714" class="Symbol">=</a> <a id="2716" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="2721" href="A202103.STLC-Syntax.html#2641" class="Function">id-sub</a> <a id="2728" class="Symbol">(</a><a id="2729" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="2733" href="A202103.STLC-Syntax.html#2733" class="Bound">t</a><a id="2734" class="Symbol">)</a>     <a id="2740" class="Symbol">=</a> <a id="2742" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="2746" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="2748" class="Symbol">(</a> <a id="2750" href="Function.html#1300" class="Function">flip</a> <a id="2755" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="2759" href="A202103.STLC-Syntax.html#2733" class="Bound">t</a> <a id="2761" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="2763" href="A202103.Prelude.html#1505" class="Postulate">fu′</a> <a id="2767" class="Symbol">(</a><a id="2768" href="A202103.Prelude.html#1398" class="Postulate">fu</a> <a id="2771" href="A202103.GenericSubstitution.html#6866" class="Function">id-lifts</a><a id="2779" class="Symbol">)</a>
                           <a id="2808" href="A202103.Prelude.html#993" class="Function Operator">⋮</a> <a id="2810" href="A202103.STLC-Syntax.html#2641" class="Function">id-sub</a> <a id="2817" href="A202103.STLC-Syntax.html#2733" class="Bound">t</a><a id="2818" class="Symbol">)</a>
<a id="2820" href="A202103.STLC-Syntax.html#2641" class="Function">id-sub</a> <a id="2827" class="Symbol">(</a><a id="2828" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="2832" href="A202103.STLC-Syntax.html#2832" class="Bound">t₁</a> <a id="2835" href="A202103.STLC-Syntax.html#2835" class="Bound">t₂</a><a id="2837" class="Symbol">)</a> <a id="2839" class="Symbol">=</a> <a id="2841" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="2845" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="2847" href="A202103.STLC-Syntax.html#2641" class="Function">id-sub</a> <a id="2854" href="A202103.STLC-Syntax.html#2832" class="Bound">t₁</a> <a id="2857" href="A202103.Prelude.html#1210" class="Function Operator">⊗</a> <a id="2859" href="A202103.STLC-Syntax.html#2641" class="Function">id-sub</a> <a id="2866" href="A202103.STLC-Syntax.html#2835" class="Bound">t₂</a>

<a id="2870" class="Comment">-- Compatibility of substituting a term and substituting a renaming.</a>
<a id="2939" class="Comment">-- XXX: Was `sub◑`.</a>
<a id="comp-sub-subr"></a><a id="2959" href="A202103.STLC-Syntax.html#2959" class="Function">comp-sub-subr</a> <a id="2973" class="Symbol">:</a> <a id="2975" class="Symbol">∀</a> <a id="2977" class="Symbol">{</a><a id="2978" href="A202103.STLC-Syntax.html#2978" class="Bound">Γ</a> <a id="2980" href="A202103.STLC-Syntax.html#2980" class="Bound">Ξ</a> <a id="2982" href="A202103.STLC-Syntax.html#2982" class="Bound">Ξ′</a> <a id="2985" href="A202103.STLC-Syntax.html#2985" class="Bound">A</a><a id="2986" class="Symbol">}</a> <a id="2988" class="Symbol">(</a><a id="2989" href="A202103.STLC-Syntax.html#2989" class="Bound">σ</a> <a id="2991" class="Symbol">:</a> <a id="2993" href="A202103.STLC-Syntax.html#2978" class="Bound">Γ</a> <a id="2995" href="A202103.GenericSubstitution.html#1509" class="Function Operator">⊢*</a> <a id="2998" href="A202103.STLC-Syntax.html#2982" class="Bound">Ξ′</a><a id="3000" class="Symbol">)</a> <a id="3002" class="Symbol">(</a><a id="3003" href="A202103.STLC-Syntax.html#3003" class="Bound">η</a> <a id="3005" class="Symbol">:</a> <a id="3007" href="A202103.STLC-Syntax.html#2982" class="Bound">Ξ′</a> <a id="3010" href="A202103.GenericRenaming.html#291" class="Function Operator">⊒</a> <a id="3012" href="A202103.STLC-Syntax.html#2980" class="Bound">Ξ</a><a id="3013" class="Symbol">)</a> <a id="3015" class="Symbol">(</a><a id="3016" href="A202103.STLC-Syntax.html#3016" class="Bound">t</a> <a id="3018" class="Symbol">:</a> <a id="3020" href="A202103.STLC-Syntax.html#2980" class="Bound">Ξ</a> <a id="3022" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="3024" href="A202103.STLC-Syntax.html#2985" class="Bound">A</a><a id="3025" class="Symbol">)</a> <a id="3027" class="Symbol">→</a>
                <a id="3045" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="3049" class="Symbol">(</a><a id="3050" href="A202103.GenericSubstitution.html#2209" class="Function">subr</a> <a id="3055" href="A202103.STLC-Syntax.html#2989" class="Bound">σ</a> <a id="3057" href="A202103.STLC-Syntax.html#3003" class="Bound">η</a><a id="3058" class="Symbol">)</a> <a id="3060" href="A202103.STLC-Syntax.html#3016" class="Bound">t</a> <a id="3062" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="3064" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="3068" href="A202103.STLC-Syntax.html#2989" class="Bound">σ</a> <a id="3070" class="Symbol">(</a><a id="3071" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="3075" href="A202103.STLC-Syntax.html#3003" class="Bound">η</a> <a id="3077" href="A202103.STLC-Syntax.html#3016" class="Bound">t</a><a id="3078" class="Symbol">)</a>
<a id="3080" href="A202103.STLC-Syntax.html#2959" class="Function">comp-sub-subr</a> <a id="3094" href="A202103.STLC-Syntax.html#3094" class="Bound">σ</a> <a id="3096" href="A202103.STLC-Syntax.html#3096" class="Bound">η</a> <a id="3098" class="Symbol">(</a><a id="3099" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="3103" href="A202103.STLC-Syntax.html#3103" class="Bound">x</a><a id="3104" class="Symbol">)</a>     <a id="3110" class="Symbol">=</a> <a id="3112" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="3117" href="A202103.STLC-Syntax.html#2959" class="Function">comp-sub-subr</a> <a id="3131" href="A202103.STLC-Syntax.html#3131" class="Bound">σ</a> <a id="3133" href="A202103.STLC-Syntax.html#3133" class="Bound">η</a> <a id="3135" class="Symbol">(</a><a id="3136" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="3140" href="A202103.STLC-Syntax.html#3140" class="Bound">t</a><a id="3141" class="Symbol">)</a>     <a id="3147" class="Symbol">=</a> <a id="3149" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="3153" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="3155" class="Symbol">(</a> <a id="3157" href="Function.html#1300" class="Function">flip</a> <a id="3162" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="3166" href="A202103.STLC-Syntax.html#3140" class="Bound">t</a> <a id="3168" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="3170" href="A202103.Prelude.html#1505" class="Postulate">fu′</a> <a id="3174" class="Symbol">(</a><a id="3175" href="A202103.Prelude.html#1398" class="Postulate">fu</a> <a id="3178" class="Symbol">(</a><a id="3179" href="A202103.GenericSubstitution.html#7154" class="Function">comp-lifts-subr</a> <a id="3195" href="A202103.STLC-Syntax.html#3131" class="Bound">σ</a> <a id="3197" href="A202103.STLC-Syntax.html#3133" class="Bound">η</a><a id="3198" class="Symbol">))</a>
                                      <a id="3239" href="A202103.Prelude.html#993" class="Function Operator">⋮</a> <a id="3241" href="A202103.STLC-Syntax.html#2959" class="Function">comp-sub-subr</a> <a id="3255" class="Symbol">(</a><a id="3256" href="A202103.GenericSubstitution.html#2751" class="Function">lifts</a> <a id="3262" href="A202103.STLC-Syntax.html#3131" class="Bound">σ</a><a id="3263" class="Symbol">)</a> <a id="3265" class="Symbol">(</a><a id="3266" href="A202103.GenericRenaming.html#2806" class="Function">liftr</a> <a id="3272" href="A202103.STLC-Syntax.html#3133" class="Bound">η</a><a id="3273" class="Symbol">)</a> <a id="3275" href="A202103.STLC-Syntax.html#3140" class="Bound">t</a><a id="3276" class="Symbol">)</a>
<a id="3278" href="A202103.STLC-Syntax.html#2959" class="Function">comp-sub-subr</a> <a id="3292" href="A202103.STLC-Syntax.html#3292" class="Bound">σ</a> <a id="3294" href="A202103.STLC-Syntax.html#3294" class="Bound">η</a> <a id="3296" class="Symbol">(</a><a id="3297" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="3301" href="A202103.STLC-Syntax.html#3301" class="Bound">t₁</a> <a id="3304" href="A202103.STLC-Syntax.html#3304" class="Bound">t₂</a><a id="3306" class="Symbol">)</a> <a id="3308" class="Symbol">=</a> <a id="3310" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="3314" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="3316" href="A202103.STLC-Syntax.html#2959" class="Function">comp-sub-subr</a> <a id="3330" href="A202103.STLC-Syntax.html#3292" class="Bound">σ</a> <a id="3332" href="A202103.STLC-Syntax.html#3294" class="Bound">η</a> <a id="3334" href="A202103.STLC-Syntax.html#3301" class="Bound">t₁</a> <a id="3337" href="A202103.Prelude.html#1210" class="Function Operator">⊗</a> <a id="3339" href="A202103.STLC-Syntax.html#2959" class="Function">comp-sub-subr</a> <a id="3353" href="A202103.STLC-Syntax.html#3292" class="Bound">σ</a> <a id="3355" href="A202103.STLC-Syntax.html#3294" class="Bound">η</a> <a id="3357" href="A202103.STLC-Syntax.html#3304" class="Bound">t₂</a>

<a id="3361" class="Comment">-- Compatibility of substituting a term and renaming a substitution.</a>
<a id="3430" class="Comment">-- XXX: Was `sub◐`.</a>
<a id="comp-sub-rens"></a><a id="3450" href="A202103.STLC-Syntax.html#3450" class="Function">comp-sub-rens</a> <a id="3464" class="Symbol">:</a> <a id="3466" class="Symbol">∀</a> <a id="3468" class="Symbol">{</a><a id="3469" href="A202103.STLC-Syntax.html#3469" class="Bound">Γ</a> <a id="3471" href="A202103.STLC-Syntax.html#3471" class="Bound">Γ′</a> <a id="3474" href="A202103.STLC-Syntax.html#3474" class="Bound">Ξ</a> <a id="3476" href="A202103.STLC-Syntax.html#3476" class="Bound">A</a><a id="3477" class="Symbol">}</a> <a id="3479" class="Symbol">(</a><a id="3480" href="A202103.STLC-Syntax.html#3480" class="Bound">η</a> <a id="3482" class="Symbol">:</a> <a id="3484" href="A202103.STLC-Syntax.html#3471" class="Bound">Γ′</a> <a id="3487" href="A202103.GenericRenaming.html#291" class="Function Operator">⊒</a> <a id="3489" href="A202103.STLC-Syntax.html#3469" class="Bound">Γ</a><a id="3490" class="Symbol">)</a> <a id="3492" class="Symbol">(</a><a id="3493" href="A202103.STLC-Syntax.html#3493" class="Bound">σ</a> <a id="3495" class="Symbol">:</a> <a id="3497" href="A202103.STLC-Syntax.html#3469" class="Bound">Γ</a> <a id="3499" href="A202103.GenericSubstitution.html#1509" class="Function Operator">⊢*</a> <a id="3502" href="A202103.STLC-Syntax.html#3474" class="Bound">Ξ</a><a id="3503" class="Symbol">)</a> <a id="3505" class="Symbol">(</a><a id="3506" href="A202103.STLC-Syntax.html#3506" class="Bound">t</a> <a id="3508" class="Symbol">:</a> <a id="3510" href="A202103.STLC-Syntax.html#3474" class="Bound">Ξ</a> <a id="3512" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="3514" href="A202103.STLC-Syntax.html#3476" class="Bound">A</a><a id="3515" class="Symbol">)</a> <a id="3517" class="Symbol">→</a>
                <a id="3535" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="3539" class="Symbol">(</a><a id="3540" href="A202103.GenericSubstitution.html#2408" class="Function">rens</a> <a id="3545" href="A202103.STLC-Syntax.html#3480" class="Bound">η</a> <a id="3547" href="A202103.STLC-Syntax.html#3493" class="Bound">σ</a><a id="3548" class="Symbol">)</a> <a id="3550" href="A202103.STLC-Syntax.html#3506" class="Bound">t</a> <a id="3552" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="3554" href="A202103.STLC-Syntax.html#829" class="Function">ren</a> <a id="3558" href="A202103.STLC-Syntax.html#3480" class="Bound">η</a> <a id="3560" class="Symbol">(</a><a id="3561" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="3565" href="A202103.STLC-Syntax.html#3493" class="Bound">σ</a> <a id="3567" href="A202103.STLC-Syntax.html#3506" class="Bound">t</a><a id="3568" class="Symbol">)</a>
<a id="3570" href="A202103.STLC-Syntax.html#3450" class="Function">comp-sub-rens</a> <a id="3584" href="A202103.STLC-Syntax.html#3584" class="Bound">η</a> <a id="3586" href="A202103.STLC-Syntax.html#3586" class="Bound">σ</a> <a id="3588" class="Symbol">(</a><a id="3589" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="3593" href="A202103.STLC-Syntax.html#3593" class="Bound">x</a><a id="3594" class="Symbol">)</a>     <a id="3600" class="Symbol">=</a> <a id="3602" href="A202103.GenericSubstitution.html#3542" class="Function">comp-subi-rens</a> <a id="3617" href="A202103.STLC-Syntax.html#3584" class="Bound">η</a> <a id="3619" href="A202103.STLC-Syntax.html#3586" class="Bound">σ</a> <a id="3621" href="A202103.STLC-Syntax.html#3593" class="Bound">x</a>
<a id="3623" href="A202103.STLC-Syntax.html#3450" class="Function">comp-sub-rens</a> <a id="3637" href="A202103.STLC-Syntax.html#3637" class="Bound">η</a> <a id="3639" href="A202103.STLC-Syntax.html#3639" class="Bound">σ</a> <a id="3641" class="Symbol">(</a><a id="3642" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="3646" href="A202103.STLC-Syntax.html#3646" class="Bound">t</a><a id="3647" class="Symbol">)</a>     <a id="3653" class="Symbol">=</a> <a id="3655" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="3659" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="3661" class="Symbol">(</a> <a id="3663" href="Function.html#1300" class="Function">flip</a> <a id="3668" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="3672" href="A202103.STLC-Syntax.html#3646" class="Bound">t</a> <a id="3674" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="3676" href="A202103.Prelude.html#1505" class="Postulate">fu′</a> <a id="3680" class="Symbol">(</a><a id="3681" href="A202103.Prelude.html#1398" class="Postulate">fu</a> <a id="3684" class="Symbol">(</a><a id="3685" href="A202103.GenericSubstitution.html#7464" class="Function">comp-lifts-rens</a> <a id="3701" href="A202103.STLC-Syntax.html#3637" class="Bound">η</a> <a id="3703" href="A202103.STLC-Syntax.html#3639" class="Bound">σ</a><a id="3704" class="Symbol">))</a>
                                      <a id="3745" href="A202103.Prelude.html#993" class="Function Operator">⋮</a> <a id="3747" href="A202103.STLC-Syntax.html#3450" class="Function">comp-sub-rens</a> <a id="3761" class="Symbol">(</a><a id="3762" href="A202103.GenericRenaming.html#2806" class="Function">liftr</a> <a id="3768" href="A202103.STLC-Syntax.html#3637" class="Bound">η</a><a id="3769" class="Symbol">)</a> <a id="3771" class="Symbol">(</a><a id="3772" href="A202103.GenericSubstitution.html#2751" class="Function">lifts</a> <a id="3778" href="A202103.STLC-Syntax.html#3639" class="Bound">σ</a><a id="3779" class="Symbol">)</a> <a id="3781" href="A202103.STLC-Syntax.html#3646" class="Bound">t</a><a id="3782" class="Symbol">)</a>
<a id="3784" href="A202103.STLC-Syntax.html#3450" class="Function">comp-sub-rens</a> <a id="3798" href="A202103.STLC-Syntax.html#3798" class="Bound">η</a> <a id="3800" href="A202103.STLC-Syntax.html#3800" class="Bound">σ</a> <a id="3802" class="Symbol">(</a><a id="3803" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="3807" href="A202103.STLC-Syntax.html#3807" class="Bound">t₁</a> <a id="3810" href="A202103.STLC-Syntax.html#3810" class="Bound">t₂</a><a id="3812" class="Symbol">)</a> <a id="3814" class="Symbol">=</a> <a id="3816" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="3820" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="3822" href="A202103.STLC-Syntax.html#3450" class="Function">comp-sub-rens</a> <a id="3836" href="A202103.STLC-Syntax.html#3798" class="Bound">η</a> <a id="3838" href="A202103.STLC-Syntax.html#3800" class="Bound">σ</a> <a id="3840" href="A202103.STLC-Syntax.html#3807" class="Bound">t₁</a> <a id="3843" href="A202103.Prelude.html#1210" class="Function Operator">⊗</a> <a id="3845" href="A202103.STLC-Syntax.html#3450" class="Function">comp-sub-rens</a> <a id="3859" href="A202103.STLC-Syntax.html#3798" class="Bound">η</a> <a id="3861" href="A202103.STLC-Syntax.html#3800" class="Bound">σ</a> <a id="3863" href="A202103.STLC-Syntax.html#3810" class="Bound">t₂</a>

<a id="3867" class="Comment">-- TODO: Not a presheaf?</a>
<a id="3892" class="Keyword">private</a>
  <a id="ss"></a><a id="3902" href="A202103.STLC-Syntax.html#3902" class="Function">ss</a> <a id="3905" class="Symbol">:</a> <a id="3907" href="A202103.GenericSubstitution.html#7901" class="Record">SubSpec</a>
  <a id="3917" href="A202103.STLC-Syntax.html#3902" class="Function">ss</a> <a id="3920" class="Symbol">=</a> <a id="3922" class="Keyword">record</a>
         <a id="3938" class="Symbol">{</a> <a id="3940" href="A202103.GenericSubstitution.html#7942" class="Field">sub</a>           <a id="3954" class="Symbol">=</a> <a id="3956" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a>
         <a id="3969" class="Symbol">;</a> <a id="3971" href="A202103.GenericSubstitution.html#7988" class="Field">id-sub</a>        <a id="3985" class="Symbol">=</a> <a id="3987" href="A202103.STLC-Syntax.html#2641" class="Function">id-sub</a>
         <a id="4003" class="Symbol">;</a> <a id="4005" href="A202103.GenericSubstitution.html#8051" class="Field">comp-sub-subr</a> <a id="4019" class="Symbol">=</a> <a id="4021" href="A202103.STLC-Syntax.html#2959" class="Function">comp-sub-subr</a>
         <a id="4044" class="Symbol">;</a> <a id="4046" href="A202103.GenericSubstitution.html#8181" class="Field">comp-sub-rens</a> <a id="4060" class="Symbol">=</a> <a id="4062" href="A202103.STLC-Syntax.html#3450" class="Function">comp-sub-rens</a>
         <a id="4085" class="Symbol">;</a> <a id="4087" href="A202103.GenericSubstitution.html#8310" class="Field">comp-sub-var</a>  <a id="4101" class="Symbol">=</a> <a id="4103" class="Symbol">λ</a> <a id="4105" href="A202103.STLC-Syntax.html#4105" class="Bound">σ</a> <a id="4107" href="A202103.STLC-Syntax.html#4107" class="Bound">x</a> <a id="4109" class="Symbol">→</a> <a id="4111" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
         <a id="4125" class="Symbol">}</a>

<a id="4128" class="Comment">------------------------------------------------------------------------------</a>

<a id="4208" class="Keyword">open</a> <a id="4213" href="A202103.GenericSubstitution-Part2.html" class="Module">A202103.GenericSubstitution-Part2</a> <a id="4247" href="A202103.STLC-Syntax.html#3902" class="Function">ss</a> <a id="4250" class="Keyword">public</a>

<a id="4258" class="Comment">-- Compatibility of substituting a term and composing substitutions.</a>
<a id="4327" class="Comment">-- XXX: Was `sub●`.</a>
<a id="comp-sub-subs"></a><a id="4347" href="A202103.STLC-Syntax.html#4347" class="Function">comp-sub-subs</a> <a id="4361" class="Symbol">:</a> <a id="4363" class="Symbol">∀</a> <a id="4365" class="Symbol">{</a><a id="4366" href="A202103.STLC-Syntax.html#4366" class="Bound">Γ</a> <a id="4368" href="A202103.STLC-Syntax.html#4368" class="Bound">Ξ</a> <a id="4370" href="A202103.STLC-Syntax.html#4370" class="Bound">Ψ</a> <a id="4372" href="A202103.STLC-Syntax.html#4372" class="Bound">A</a><a id="4373" class="Symbol">}</a> <a id="4375" class="Symbol">(</a><a id="4376" href="A202103.STLC-Syntax.html#4376" class="Bound">σ′</a> <a id="4379" class="Symbol">:</a> <a id="4381" href="A202103.STLC-Syntax.html#4366" class="Bound">Γ</a> <a id="4383" href="A202103.GenericSubstitution.html#1509" class="Function Operator">⊢*</a> <a id="4386" href="A202103.STLC-Syntax.html#4368" class="Bound">Ξ</a><a id="4387" class="Symbol">)</a> <a id="4389" class="Symbol">(</a><a id="4390" href="A202103.STLC-Syntax.html#4390" class="Bound">σ</a> <a id="4392" class="Symbol">:</a> <a id="4394" href="A202103.STLC-Syntax.html#4368" class="Bound">Ξ</a> <a id="4396" href="A202103.GenericSubstitution.html#1509" class="Function Operator">⊢*</a> <a id="4399" href="A202103.STLC-Syntax.html#4370" class="Bound">Ψ</a><a id="4400" class="Symbol">)</a> <a id="4402" class="Symbol">(</a><a id="4403" href="A202103.STLC-Syntax.html#4403" class="Bound">t</a> <a id="4405" class="Symbol">:</a> <a id="4407" href="A202103.STLC-Syntax.html#4370" class="Bound">Ψ</a> <a id="4409" href="A202103.STLC-Syntax.html#517" class="Datatype Operator">⊢</a> <a id="4411" href="A202103.STLC-Syntax.html#4372" class="Bound">A</a><a id="4412" class="Symbol">)</a> <a id="4414" class="Symbol">→</a>
                <a id="4432" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="4436" class="Symbol">(</a><a id="4437" href="A202103.GenericSubstitution-Part2.html#1398" class="Function">subs</a> <a id="4442" href="A202103.STLC-Syntax.html#4376" class="Bound">σ′</a> <a id="4445" href="A202103.STLC-Syntax.html#4390" class="Bound">σ</a><a id="4446" class="Symbol">)</a> <a id="4448" href="A202103.STLC-Syntax.html#4403" class="Bound">t</a> <a id="4450" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="4452" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="4456" href="A202103.STLC-Syntax.html#4376" class="Bound">σ′</a> <a id="4459" class="Symbol">(</a><a id="4460" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="4464" href="A202103.STLC-Syntax.html#4390" class="Bound">σ</a> <a id="4466" href="A202103.STLC-Syntax.html#4403" class="Bound">t</a><a id="4467" class="Symbol">)</a>
<a id="4469" href="A202103.STLC-Syntax.html#4347" class="Function">comp-sub-subs</a> <a id="4483" href="A202103.STLC-Syntax.html#4483" class="Bound">σ′</a> <a id="4486" href="A202103.STLC-Syntax.html#4486" class="Bound">σ</a> <a id="4488" class="Symbol">(</a><a id="4489" href="A202103.STLC-Syntax.html#558" class="InductiveConstructor">var</a> <a id="4493" href="A202103.STLC-Syntax.html#4493" class="Bound">x</a><a id="4494" class="Symbol">)</a>     <a id="4500" class="Symbol">=</a> <a id="4502" href="A202103.GenericSubstitution-Part2.html#1689" class="Function">comp-subi-subs</a> <a id="4517" href="A202103.STLC-Syntax.html#4483" class="Bound">σ′</a> <a id="4520" href="A202103.STLC-Syntax.html#4486" class="Bound">σ</a> <a id="4522" href="A202103.STLC-Syntax.html#4493" class="Bound">x</a>
<a id="4524" href="A202103.STLC-Syntax.html#4347" class="Function">comp-sub-subs</a> <a id="4538" href="A202103.STLC-Syntax.html#4538" class="Bound">σ′</a> <a id="4541" href="A202103.STLC-Syntax.html#4541" class="Bound">σ</a> <a id="4543" class="Symbol">(</a><a id="4544" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="4548" href="A202103.STLC-Syntax.html#4548" class="Bound">t</a><a id="4549" class="Symbol">)</a>     <a id="4555" class="Symbol">=</a> <a id="4557" href="A202103.STLC-Syntax.html#588" class="InductiveConstructor">lam</a> <a id="4561" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="4563" class="Symbol">(</a> <a id="4565" href="Function.html#1300" class="Function">flip</a> <a id="4570" href="A202103.STLC-Syntax.html#2451" class="Function">sub</a> <a id="4574" href="A202103.STLC-Syntax.html#4548" class="Bound">t</a> <a id="4576" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="4578" href="A202103.Prelude.html#1505" class="Postulate">fu′</a> <a id="4582" class="Symbol">(</a><a id="4583" href="A202103.Prelude.html#1398" class="Postulate">fu</a> <a id="4586" class="Symbol">(</a><a id="4587" href="A202103.GenericSubstitution-Part2.html#2796" class="Function">comp-lifts-subs</a> <a id="4603" href="A202103.STLC-Syntax.html#4538" class="Bound">σ′</a> <a id="4606" href="A202103.STLC-Syntax.html#4541" class="Bound">σ</a><a id="4607" class="Symbol">))</a>
                                       <a id="4649" href="A202103.Prelude.html#993" class="Function Operator">⋮</a> <a id="4651" href="A202103.STLC-Syntax.html#4347" class="Function">comp-sub-subs</a> <a id="4665" class="Symbol">(</a><a id="4666" href="A202103.GenericSubstitution.html#2751" class="Function">lifts</a> <a id="4672" href="A202103.STLC-Syntax.html#4538" class="Bound">σ′</a><a id="4674" class="Symbol">)</a> <a id="4676" class="Symbol">(</a><a id="4677" href="A202103.GenericSubstitution.html#2751" class="Function">lifts</a> <a id="4683" href="A202103.STLC-Syntax.html#4541" class="Bound">σ</a><a id="4684" class="Symbol">)</a> <a id="4686" href="A202103.STLC-Syntax.html#4548" class="Bound">t</a>
                                       <a id="4727" class="Symbol">)</a>
<a id="4729" href="A202103.STLC-Syntax.html#4347" class="Function">comp-sub-subs</a> <a id="4743" href="A202103.STLC-Syntax.html#4743" class="Bound">σ′</a> <a id="4746" href="A202103.STLC-Syntax.html#4746" class="Bound">σ</a> <a id="4748" class="Symbol">(</a><a id="4749" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="4753" href="A202103.STLC-Syntax.html#4753" class="Bound">t₁</a> <a id="4756" href="A202103.STLC-Syntax.html#4756" class="Bound">t₂</a><a id="4758" class="Symbol">)</a> <a id="4760" class="Symbol">=</a> <a id="4762" href="A202103.STLC-Syntax.html#628" class="InductiveConstructor">app</a> <a id="4766" href="A202103.Prelude.html#1092" class="Function Operator">&amp;</a> <a id="4768" href="A202103.STLC-Syntax.html#4347" class="Function">comp-sub-subs</a> <a id="4782" href="A202103.STLC-Syntax.html#4743" class="Bound">σ′</a> <a id="4785" href="A202103.STLC-Syntax.html#4746" class="Bound">σ</a> <a id="4787" href="A202103.STLC-Syntax.html#4753" class="Bound">t₁</a> <a id="4790" href="A202103.Prelude.html#1210" class="Function Operator">⊗</a> <a id="4792" href="A202103.STLC-Syntax.html#4347" class="Function">comp-sub-subs</a> <a id="4806" href="A202103.STLC-Syntax.html#4743" class="Bound">σ′</a> <a id="4809" href="A202103.STLC-Syntax.html#4746" class="Bound">σ</a> <a id="4811" href="A202103.STLC-Syntax.html#4756" class="Bound">t₂</a>

<a id="4815" class="Comment">-- TODO: Kind of like a presheaf...</a>
<a id="4851" class="Keyword">private</a>
  <a id="ss2"></a><a id="4861" href="A202103.STLC-Syntax.html#4861" class="Function">ss2</a> <a id="4865" class="Symbol">:</a> <a id="4867" href="A202103.GenericSubstitution-Part2.html#3252" class="Record">SubSpec-Part2</a>
  <a id="4883" href="A202103.STLC-Syntax.html#4861" class="Function">ss2</a> <a id="4887" class="Symbol">=</a> <a id="4889" class="Keyword">record</a>
          <a id="4906" class="Symbol">{</a> <a id="4908" href="A202103.GenericSubstitution-Part2.html#3299" class="Field">comp-sub-subs</a> <a id="4922" class="Symbol">=</a> <a id="4924" href="A202103.STLC-Syntax.html#4347" class="Function">comp-sub-subs</a>
          <a id="4948" class="Symbol">}</a>

<a id="4951" class="Comment">------------------------------------------------------------------------------</a>

<a id="5031" class="Keyword">open</a> <a id="5036" href="A202103.GenericSubstitution-Part3.html" class="Module">A202103.GenericSubstitution-Part3</a> <a id="5070" href="A202103.STLC-Syntax.html#4861" class="Function">ss2</a> <a id="5074" class="Keyword">public</a>

<a id="5082" class="Comment">------------------------------------------------------------------------------</a>
</pre></body></html>